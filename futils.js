!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):r.futils=n()}(this,function(){"use strict";function r(n,t){return n.length<=0?t:function(){return P.isArray(n[0])?r([].concat(M(n[0]),M(n.slice(1))),t):r(n.slice(1),[].concat(M(t),[n[0]]))}}function n(r){return{"@@transducer/step":r,"@@transducer/init":function(){throw"transducers/init not supported on generic transformers"},"@@transducer/result":function(r){return r}}}var t=function(r,n){var t=r,e=[],i=null;if(n.length>=t)return n;for(;t>0;)e.push("arg"+t--);return i="return ("+e.join(",")+") => fx("+e.join(",")+")",new Function("fx",i)(n)},e={aritize:t},i=function(r){return null==r},u=function(r){return null!=r},o=function(r){return void 0===r},a=function(r){return null===r},c=function(r){return"string"==typeof r},s=function(r){return"number"==typeof r&&!isNaN(r)&&isFinite(r)},f=function(r){return s(r)&&r%1===0},l=function(r){return s(r)&&r%1!==0},d=function(r){return"boolean"==typeof r},p=function(r){return!!r},v=function(r){return!r},y=function(r){return"function"==typeof r},h=function(r){return"[object Object]"==={}.toString.call(r)},g=function(r){return Array.isArray(r)},m=function(r){return Date.prototype.isPrototypeOf(r)},w=function(r){return RegExp.prototype.isPrototypeOf(r)},b=function(r){return Node.prototype.isPrototypeOf(r)},A=function(r){return NodeList.prototype.isPrototypeOf(r)},O=function(r){return Map.prototype.isPrototypeOf(r)},F=function(r){return WeakMap.prototype.isPrototypeOf(r)},j=function(r){return Set.prototype.isPrototypeOf(r)},N=function(r){return WeakSet.prototype.isPrototypeOf(r)},x=function(r){return Promise.prototype.isPrototypeOf(r)||r&&y(r.then)},S=function(r){return!i(r)&&y(r.next)},k=function(r){return!(i(r)||!r[Symbol.iterator]&&isNaN(r.length))},R=function r(n,t){return void 0===t?function(t){return r(n,t)}:Array.isArray(t)&&t.every(n)},z=function r(n,t){if(void 0===t)return function(t){return r(n,t)};if(h(t)){for(var e in t)if(t.hasOwnProperty(e)&&!n(t[e]))return!1;return!0}return!1},P={isNil:i,isAny:u,isNull:a,isVoid:o,isArray:g,isBool:d,isSet:j,isString:c,isWeakMap:F,isWeakSet:N,isFalse:v,isTrue:p,isFunc:y,isFloat:l,isInt:f,isNumber:s,isNode:b,isNodeList:A,isDate:m,isObject:h,isPromise:x,isIterable:k,isArrayOf:R,isObjectOf:z,isMap:O,isRegex:w,isIterator:S},I=function(){function r(r,n){var t=[],e=!0,i=!1,u=void 0;try{for(var o,a=r[Symbol.iterator]();!(e=(o=a.next()).done)&&(t.push(o.value),!n||t.length!==n);e=!0);}catch(r){i=!0,u=r}finally{try{!e&&a.return&&a.return()}finally{if(i)throw u}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),M=function(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)},W=function(r){return r},L=function(r){return function(){return r}},V=function(r){return function(n){return n(r)}},q=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];if(P.isFunc(r)&&P.isArrayOf(P.isFunc,t))return e.aritize(r.length,function(){return t.reduce(function(r,n){return n(r)},r.apply(void 0,arguments))});throw"combinators::pipe awaits functions but saw "+[r].concat(t)},D=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];if(P.isArrayOf(P.isFunc,n))return q.apply(void 0,M(n.reverse()));throw"combinators::compose awaits functions but saw "+n},T=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];if(P.isArrayOf(P.isFunc,n))return e.aritize(n[0].length,function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];return!n.some(function(r){return!r.apply(void 0,t)})});throw"combinators::and awaits functions but saw "+n},B=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];if(P.isArrayOf(P.isFunc,n))return e.aritize(n[0].length,function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];return n.some(function(r){return!!r.apply(void 0,t)})});throw"combinators::or awaits functions but saw "+n},E=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];if(P.isArrayOf(P.isFunc,n))return function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];var i=n[0].apply(n,t);return n.slice(1).forEach(function(r){return r.apply(void 0,t)}),null==i?null:i};throw"combinators::splat awaits a bunch of functions but saw "+n},C={compose:D,pipe:q,identity:W,tap:V,getter:L,and:T,or:B,splat:E},J=function r(n){if(P.isFunc(n))return function(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];return void 0===t?r(n):n(t)};throw"decorators::monadic awaits a function but saw "+n},G=function r(n){if(P.isFunc(n))return function(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];return void 0===t?r(n):void 0===e?J(function(r){return n(t,r)}):n(t,e)};throw"decorators::dyadic awaits a function but saw "+n},H=function r(n){if(P.isFunc(n))return function(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];return void 0===t?r(n):void 0===e?G(function(r,e){return n(t,r,e)}):void 0===i?J(function(r){return n(t,e,r)}):n(t,e,i)};throw"decorators::triadic awaits a function but saw "+n},K=function r(n){if(P.isFunc(n))return function(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],u=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3];return void 0===t?r(n):void 0===e?H(function(r,e,i){return n(t,r,e,i)}):void 0===i?G(function(r,i){return n(t,e,r,i)}):void 0===u?J(function(r){return n(t,e,i,r)}):n(t,e,i,u)};throw"decorators::tetradic awaits a function but saw "+n},Q=function(r){var n=0;if(P.isFunc(r))return e.aritize(r.length,function(){return 0===n?(n=1,r.apply(void 0,arguments)):null});throw"decorators::once awaits a function but saw "+r},U=function(r){if(P.isFunc(r))return e.aritize(r.length,function(){return!r.apply(void 0,arguments)});throw"decorators::not awaits a function but saw "+r},X=function(r){if(P.isFunc(r))return e.aritize(r.length,function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return r.apply(void 0,M(t.reverse()))});throw"decorators::flip awaits a function but saw "+r},Y=function(r){if(P.isFunc(r))return function(){var n=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];return null==n||void 0===n?null:r(n)};throw"decorators::maybe awaits a function but saw "+r},Z=function r(n){if(P.isFunc(n))return n.length<2?n:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.length<=e.length?n.apply(void 0,e):function(){for(var t=arguments.length,i=Array(t),u=0;u<t;u++)i[u]=arguments[u];return r(n).apply(void 0,e.concat(i))}};throw"decorators::curry awaits a function but saw "+n},$=function(r){if(P.isFunc(r))return r.length<2?r:function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return r.length<=t.length?r.apply(void 0,M(t.reverse())):function(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];return Z(r).apply(void 0,t.concat(e))}};throw"decorators::curryRight awaits a function but saw "+r},_=function r(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];var u=e;if(P.isFunc(n)){for(;u.length<n.length;)u.push(void 0);return function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var o=u.map(function(r){return P.isVoid(r)?e.shift():r});return o.lastIndexOf(void 0)<0?n.apply(void 0,M(o)):r.apply(void 0,[n].concat(M(o)))}}throw"decorators::partial awaits a function but saw "+n},rr=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];var i=t;if(P.isFunc(r)){for(;i.length<r.length;)i.push(void 0);return function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];var u=i.map(function(r){return P.isVoid(r)?t.shift():r});return u.lastIndexOf(void 0)<0?r.apply(void 0,M(u.reverse())):_.apply(void 0,[r].concat(M(u)))}}throw"decorators::partialRight awaits a function but saw "+r},nr=function r(n){var t=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];if(void 0===t)return function(t,e){return r(n,t,e)};if(P.isFunc(n)&&P.isFunc(t))return P.isFunc(i)?e.aritize(t.length,function(){return n.apply(void 0,arguments)?t.apply(void 0,arguments):i.apply(void 0,arguments)}):e.aritize(t.length,function(){return n.apply(void 0,arguments)?t.apply(void 0,arguments):null});throw"decorators::given awaits (fn, fn fn?), but saw "+[n,t,i]},tr=function(r){var n={};if(P.isFunc(r))return e.aritize(r.length,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var u=JSON.stringify(e);return n.hasOwnProperty(u)||(n[u]=r.apply(void 0,e)),n[u]});throw"decorators::memoize awaits a function but saw "+r},er={monadic:J,dyadic:G,triadic:H,not:U,flip:X,maybe:Y,curry:Z,curryRight:$,partial:_,partialRight:rr,given:nr,memoize:tr,once:Q,tetradic:K},ir=er.dyadic(function(r,n){return P.isFunc(r)?function(t){return ir(r(t),n)}:P.isFunc(n)?function(t){return ir(r,n(t))}:r===n}),ur=er.dyadic(function(r,n){return r<n}),or=er.dyadic(function(r,n){return r<=n}),ar=er.dyadic(function(r,n){return r>n}),cr=er.dyadic(function(r,n){return r>=n}),sr=er.dyadic(function(r,n){var t=r.localeCompare(n);return t<0?1:t>0?-1:0}),fr={eq:ir,gt:ur,gte:or,lt:ar,lte:cr,locals:sr},lr=er.dyadic(function(r,n){return{}.hasOwnProperty.call(n,r)}),dr=er.dyadic(function(r,n){var t=P.isString(r)&&/\./.test(r)?r.split("."):[r];return t.reduce(function(r,n){return P.isAny(r)&&P.isAny(r[n])?r[n]:null},n)}),pr=er.dyadic(function(r,n){return r?dr(n,r):null}),vr=er.triadic(function(r,n,t){var e=r,i=t;return P.isArray(t)?(i=[].concat(M(t)),e=parseInt(e,10),P.isNumber(e)&&e<t.length&&e>=0&&(i[e]=n)):P.isObject(t)&&(i=Object.assign({},t),P.isString(e)&&(i[e]=n)),i}),yr=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return function(n){for(var e=arguments.length,i=Array(e>1?e-1:0),u=1;u<e;u++)i[u-1]=arguments[u];var o=P.isFunc(n[r])?n[r].apply(n,t.concat(i)):P.isFunc(r)?r.call.apply(r,[n].concat(t,i)):null;return null==o?n:o}},hr=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return function(n){for(var e=arguments.length,i=Array(e>1?e-1:0),u=1;u<e;u++)i[u-1]=arguments[u];var o=P.isFunc(n[r])?n[r].apply(n,M([].concat(t,i).reverse())):P.isFunc(r)?r.call.apply(r,[n].concat(M([].concat(t,i).reverse()))):null;return null==o?n:o}},gr=function(r){for(var n=arguments.length,t=Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return Object.assign.apply(Object,[r].concat(t))},mr=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];return Object.assign.apply(Object,[{}].concat(n))},wr=function(r){return Object.freeze(mr(r))},br=function(r){return r[0]},Ar=function(r){return r[r.length-1]},Or=er.dyadic(function(r,n){var t,e;if(P.isFunc(r)){if(P.isFunc(n.map))return n.map(r);if(P.isObject(n)){t=Object.keys(n),e={};var i=!0,u=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var s=a.value;e[s]=r(n[s],s,n)}}catch(r){u=!0,o=r}finally{try{!i&&c.return&&c.return()}finally{if(u)throw o}}return e}return n}throw"enums::map awaits a function as first argument but saw "+r}),Fr=function(n){var t;if(P.isArray(n)){for(t=r(n,[]);t instanceof Function;)t=t();return t}return n},jr=er.dyadic(function(r,n){if(P.isFunc(r))return Fr(Or(r,n));throw"enums::flatMap awaits a function as first argument but saw "+r}),Nr={field:dr,has:lr,exec:yr,execRight:hr,access:pr,extend:gr,merge:mr,immutable:wr,first:br,last:Ar,map:Or,flatten:Fr,flatMap:jr,assoc:vr},xr=function(r){return{value:r,map:function(){return this}}},Sr=function r(n){return{value:n,map:function(t){return r(t(n))}}},kr=er.curry(function(r,n,t,e,i){return Nr.map(function(r){return n(t,r,i)},e(r(t,i)))}),Rr=kr(Nr.field,Nr.assoc),zr=er.dyadic(function(r,n){return r(xr)(n).value}),Pr=er.triadic(function(r,n,t){return r(function(r){return Sr(n(r))})(t).value}),Ir=er.triadic(function(r,n,t){return Pr(r,C.getter(n),t)}),Mr=function(){for(var r=arguments.length,n=Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce(function(r,n){return void 0===r[n]&&(r[n]=Rr(n)),r},{index:Rr})},Wr=er.dyadic(function(r,n){return Sr(Nr.map(C.compose(Nr.field("value"),r),n))}),Lr={lens:kr,makeLenses:Mr,mappedLens:Wr,view:zr,over:Pr,set:Ir},Vr=er.dyadic(function(r,n){var t=n;return function(n){return P.isVoid(n)||(t=r(t,n)),t}}),qr=function(r){return Vr(function(r,n){return r+n},r)},Dr=function(r){return Vr(function(r,n){return r===n?r:n},r)},Tr={stateful:Vr,counter:qr,chosen:Dr},Br="@@transducer/step",Er="@@transducer/init",Cr="@@transducer/result";n.isReduced=function(r){return!P.isNil(r)&&r.reduced},n.reduce=function(r){return{value:r,reduced:!0}},n.deref=function(r){return r&&void 0!==r.value?r.value:null};var Jr=er.curry(function(r,t,e){var i=P.isFunc(r)?n(r):r,u=t;if(P.isObject(e)){var o=Object.keys(e),a=!0,c=!1,s=void 0;try{for(var f,l=o[Symbol.iterator]();!(a=(f=l.next()).done);a=!0){var d=f.value;if(u=i[Br](u,[e[d],d]),n.isReduced(u)){u=n.deref(u);break}}}catch(r){c=!0,s=r}finally{try{!a&&l.return&&l.return()}finally{if(c)throw s}}return i[Cr](u)}var p=!0,v=!1,y=void 0;try{for(var h,g=e[Symbol.iterator]();!(p=(h=g.next()).done);p=!0){var m=h.value;if(u=i[Br](u,m),n.isReduced(u)){u=n.deref(u);break}}}catch(r){v=!0,y=r}finally{try{!p&&g.return&&g.return()}finally{if(v)throw y}}return i[Cr](u)}),Gr=er.curry(function(r,t,e,i){return Jr(r(P.isFunc(t)?n(t):t),e,i)}),Hr=er.curry(function(r,n,t){if(P.isArray(r))return Gr(n,function(r,n){return[].concat(M(r),[n])},r,t);if(P.isObject(r))return Gr(n,function(r,n){var t=I(n,2),e=t[0],i=t[1],u=Object.assign({},r);return u[i]=e,u},r,t);if(P.isNumber(r)||P.isString(r))return Gr(n,function(r,n){return r+n},r,t);throw"transducers::into got unknown inital value, use ::transduce with a special step function"}),Kr=function(r){return function(n){return{"@@transducer/init":function(){return n[Er]()},"@@transducer/step":function(t,e){return n[Br](t,r(e))},"@@transducer/result":function(r){return n[Cr](r)}}}},Qr=function(r){return function(n){return{"@@transducer/init":function(){return n[Er]()},"@@transducer/step":function(t,e){return r(e)?n[Br](t,e):t},"@@transducer/result":function(r){return n[Cr](r)}}}},Ur=function(r){return{"@@transducer/init":function(){return r[Er]()},"@@transducer/step":function(t,e){return Jr({"@@transducer/init":function(){return r[Er]()},"@@transducer/step":function(t,e){var i=r[Br](t,e);return n.isReduced(i)?n.deref(i):i},"@@transducer/result":function(r){return r}},t,e)},"@@transducer/result":function(n){return r[Cr](n)}}},Xr=function(){var r=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return function(n){var t=r;return{"@@transducer/init":function(){return n[Er]()},"@@transducer/step":function(r,e){return t>0?(t-=1,r):n[Br](r,e)},"@@transducer/result":function(r){return n[Cr](r)}}}},Yr=function(r){return function(n){var t=!0,e=!1;return{"@@transducer/init":function(){return n[Er]()},"@@transducer/step":function(i,u){return!e&&(t=!!r(u))?i:(e=!0,n[Br](i,u))},"@@transducer/result":function(r){return n[Cr](r)}}}},Zr=function(){var r=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return function(t){var e=0;return{"@@transducer/init":function(){return t[Er]()},"@@transducer/step":function(i,u){return e<r?(e+=1,t[Br](i,u)):n.reduce(i)},"@@transducer/result":function(r){return t[Cr](r)}}}},$r=function(r){return function(t){var e=!0;return{"@@transducer/init":function(){return t[Er]()},"@@transducer/step":function(i,u){return e=!!r(u),e?t[Br](i,u):n.reduce(i)},"@@transducer/result":function(r){return t[Cr](r)}}}},_r=function(r){return{"@@transducer/init":function(){return r[Er]()},"@@transducer/step":function(n,t){return P.isNil(t)?n:r[Br](n,t)},"@@transducer/result":function(n){return r[Cr](n)}}},rn=function(r){var n=Object.create(null);return{"@@transducer/init":function(){return r[Er]()},"@@transducer/step":function(t,e){return n[e]?t:(n[e]=!0,r[Br](t,e))},"@@transducer/result":function(n){return r[Cr](n)}}},nn=function(){var r=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return function(n){var t,e=[];return{"@@transducer/init":function(){return n[Er]()},"@@transducer/step":function(i,u){return e.length<r?(e.push(u),i):(t=n[Br](i,e),e=[u],t)},"@@transducer/result":function(r){return e.length>0?n[Cr](n[Br](r,e)):n[Cr](r)}}}},tn=function(r){return function(n){var t,e,i,u=[];return{"@@transducer/init":function(){return n[Er]()},"@@transducer/step":function(o,a){return e=r(a),u.length<1?(i=e,u.push(a),o):i===e?(u.push(a),o):(i=e,t=n[Br](o,u),u=[a],t)},"@@transducer/result":function(r){return u.length>0?n[Cr](n[Br](r,u)):n[Cr](r)}}}},en={fold:Jr,transduce:Gr,into:Hr,map:Kr,filter:Qr,unique:rn,keep:_r,partition:nn,partitionWith:tn,take:Zr,takeWhile:$r,drop:Xr,dropWhile:Yr,flatten:Ur},un={aritize:e.aritize,isNil:P.isNil,isVoid:P.isVoid,isNull:P.isNull,isString:P.isString,isAny:P.isAny,isTrue:P.isTrue,isNumber:P.isNumber,isFunc:P.isFunc,isArray:P.isArray,isObject:P.isObject,isInt:P.isInt,isFloat:P.isFloat,isBool:P.isBool,isFalse:P.isFalse,isDate:P.isDate,isRegex:P.isRegex,isNode:P.isNode,isNodeList:P.isNodeList,isMap:P.isMap,isSet:P.isSet,isWeakMap:P.isWeakMap,isWeakSet:P.isWeakSet,isPromise:P.isPromise,isIterator:P.isIterator,isIterable:P.isIterable,isArrayOf:P.isArrayOf,isObjectOf:P.isObjectOf,identity:C.identity,getter:C.getter,tap:C.tap,compose:C.compose,pipe:C.pipe,and:C.and,or:C.or,splat:C.splat,monadic:er.monadic,dyadic:er.dyadic,triadic:er.triadic,tetradic:er.tetradic,once:er.once,not:er.not,flip:er.flip,maybe:er.maybe,curry:er.curry,curryRight:er.curryRight,partial:er.partial,partialRight:er.partialRight,given:er.given,memoize:er.memoize,transducers:en,stateful:Tr.stateful,counter:Tr.counter,chosen:Tr.chosen,lens:Lr.lens,makeLenses:Lr.makeLenses,view:Lr.view,over:Lr.over,set:Lr.set,mappedLens:Lr.mappedLens,assoc:Nr.assoc,field:Nr.field,has:Nr.has,exec:Nr.exec,execRight:Nr.execRight,access:Nr.access,extend:Nr.extend,merge:Nr.merge,immutable:Nr.immutable,first:Nr.first,last:Nr.last,map:Nr.map,flatMap:Nr.flatMap,flatten:Nr.flatten,eq:fr.eq,gt:fr.gt,lt:fr.lt,gte:fr.gte,lte:fr.lte,locals:fr.locals};return un});