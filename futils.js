/* @banner futils | www.npmjs.com/package/futils */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.futils=t()}(this,function(){"use strict";function n(n){var t;return t={},H(t,Rt,n),H(t,Et,function(){throw"transducers/init not supported on generic transformers"}),H(t,Nt,function(n){return n}),t}var t=function(n){return"function"==typeof n},e=function(n,e){if("number"!=typeof n||isNaN(n)||!isFinite(n))throw"arity::aritize awaits a number as first argument but saw "+n;if(!t(e))throw"arity::aritize awaits a function as second argument but saw "+e;switch(Math.abs(n)){case 1:return function(n){return e(n)};case 2:return function(n,t){return e(n,t)};case 3:return function(n,t,r){return e(n,t,r)};case 4:return function(n,t,r,u){return e(n,t,r,u)};case 5:return function(n,t,r,u,o){return e(n,t,r,u,o)};case 6:return function(n,t,r,u,o,i){return e(n,t,r,u,o,i)};case 7:return function(n,t,r,u,o,i,f){return e(n,t,r,u,o,i,f)};case 8:return function(n,t,r,u,o,i,f,a){return e(n,t,r,u,o,i,f,a)};case 9:return function(n,t,r,u,o,i,f,a,c){return e(n,t,r,u,o,i,f,a,c)};case 10:return function(n,t,r,u,o,i,f,a,c,l){return e(n,t,r,u,o,i,f,a,c,l)};case 11:return function(n,t,r,u,o,i,f,a,c,l,s){return e(n,t,r,u,o,i,f,a,c,l,s)};case 12:return function(n,t,r,u,o,i,f,a,c,l,s,v){return e(n,t,r,u,o,i,f,a,c,l,s,v)};case 13:return function(n,t,r,u,o,i,f,a,c,l,s,v,y){return e(n,t,r,u,o,i,f,a,c,l,s,v,y)};case 14:return function(n,t,r,u,o,i,f,a,c,l,s,v,y,p){return e(n,t,r,u,o,i,f,a,c,l,s,v,y,p)};case 15:return function(n,t,r,u,o,i,f,a,c,l,s,v,y,p,h){return e(n,t,r,u,o,i,f,a,c,l,s,v,y,p,h)};case 16:return function(n,t,r,u,o,i,f,a,c,l,s,v,y,p,h,d){return e(n,t,r,u,o,i,f,a,c,l,s,v,y,p,h,d)};default:return e}},r=function n(e){if(t(e))return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return void 0===t?n(e):e(t)};throw"arity::monadic awaits a function but saw "+e},u=function n(e){if(t(e))return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===t?n(e):void 0===u?r(function(n){return e(t,n)}):e(t,u)};throw"arity::dyadic awaits a function but saw "+e},o=function n(e){if(t(e))return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return void 0===t?n(e):void 0===o?u(function(n,r){return e(t,n,r)}):void 0===i?r(function(n){return e(t,o,n)}):e(t,o,i)};throw"arity::triadic awaits a function but saw "+e},i=function n(e){if(t(e))return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return void 0===t?n(e):void 0===i?o(function(n,r,u){return e(t,n,r,u)}):void 0===f?u(function(n,r){return e(t,i,n,r)}):void 0===a?r(function(n){return e(t,i,f,n)}):e(t,i,f,a)};throw"arity::tetradic awaits a function but saw "+e},f=function(n){return null===n||void 0===n},a=function(n){return!f(n)},c=function(n){return void 0===n},l=function(n){return null===n},s=function(n){return"string"==typeof n},v=function(n){return"number"==typeof n&&!isNaN(n)&&isFinite(n)},y=function(n){return v(n)&&n%1==0},p=function(n){return v(n)&&n%1!=0},h=function(n){return"boolean"==typeof n},d=function(n){return!!n},m=function(n){return!n},w=function(n){return"function"==typeof n},k=function(n){return null!=n&&n.constructor===Object},g=function(n){return Array.isArray(n)},b=function(n){return Date.prototype.isPrototypeOf(n)},O=function(n){return RegExp.prototype.isPrototypeOf(n)},A=function(n){return Node.prototype.isPrototypeOf(n)},M=function(n){return NodeList.prototype.isPrototypeOf(n)},S=function(n){return Map.prototype.isPrototypeOf(n)},x=function(n){return Set.prototype.isPrototypeOf(n)},P=function(n){return WeakSet.prototype.isPrototypeOf(n)},j=function(n){return WeakMap.prototype.isPrototypeOf(n)},I=function(n){return Promise.prototype.isPrototypeOf(n)||n&&w(n.then)},R=function(n){return!f(n)&&w(n.next)},E=function(n){return!(f(n)||!n[Symbol.iterator]&&isNaN(n.length))},N=function(n){return!!n&&w(n.next)&&w(n.throw)&&w(n.return)&&!!n[Symbol.iterator]},T=function n(t,e){return void 0===e?function(e){return n(t,e)}:Array.isArray(e)&&e.every(t)},L=function n(t,e){if(void 0===e)return function(e){return n(t,e)};if(k(e)){for(var r in e)if(e.hasOwnProperty(r)&&!t(e[r]))return!1;return!0}return!1},_=function(n){return null!=n&&w(n.equals)},F=function(n){return null!=n&&w(n.map)},U=function(n){return null!=n&&w(n.ap)},q=function(n){return null!=n&&(w(n.constructor.of)||w(n.of))},z=function(n){return null!=n&&(w(n.fold)||w(n.reduce))},V=function(n){return null!=n&&w(n.biMap)},W=function(n){return null!=n&&w(n.concat)},C=function(n){return g(n)||W(n)&&(w(n.empty)||w(n.constructor.empty))},D=function(n){return U(n)&&q(n)},G=function(n){return F(n)&&_(n)&&w(n.flatten)&&w(n.flatMap)},B=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},J=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),H=function(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n},K=function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},Q=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t},X=function(){function n(n,t){var e=[],r=!0,u=!1,o=void 0;try{for(var i,f=n[Symbol.iterator]();!(r=(i=f.next()).done)&&(e.push(i.value),!t||e.length!==t);r=!0);}catch(n){u=!0,o=n}finally{try{!r&&f.return&&f.return()}finally{if(u)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Y=function(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)},Z=Symbol("SuspendedInvocation"),$=function(n){for(var t,e=arguments.length,r=Array(e>1?e-1:0),u=1;u<e;u++)r[u-1]=arguments[u];return t={},H(t,Z,!0),H(t,"run",function(){return n.apply(void 0,r)}),t},nn=function(n){return k(n)&&w(n.run)&&n[Z]},tn=function(n){if(w(n))return e(n.length,function(){for(var t=n.apply(void 0,arguments);nn(t);)t=t.run();return t});throw"trampoline :: expected argument to be function but saw "+n},en=function(n){return n},rn=function(n){return function(){return n}},un=function(n){return function(t){return t(n)}},on=function n(t,e){for(var r=arguments.length,u=Array(r>2?r-2:0),o=2;o<r;o++)u[o-2]=arguments[o];return void 0===e?function(e){for(var r=arguments.length,u=Array(r>1?r-1:0),o=1;o<r;o++)u[o-1]=arguments[o];return n.apply(void 0,[t,e].concat(u))}:u.length>0?t.apply(void 0,Y(u.map(e))):function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];return t.apply(void 0,Y(r.map(e)))}},fn=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),u=1;u<t;u++)r[u-1]=arguments[u];if(w(n)&&T(w,r))return e(n.length,function(){return r.reduce(function(n,t){return t(n)},n.apply(void 0,arguments))});throw"combinators::pipe awaits functions but saw "+[n].concat(r)},an=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];if(T(w,t))return fn.apply(void 0,Y(t.reverse()));throw"combinators::compose awaits functions but saw "+t},cn=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(T(w,t))return e(t[0].length,function(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];return!t.some(function(n){return!n.apply(void 0,e)})});throw"combinators::and awaits functions but saw "+t},ln=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(T(w,t))return e(t[0].length,function(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];return t.some(function(n){return!!n.apply(void 0,e)})});throw"combinators::or awaits functions but saw "+t},sn=function(n){if(w(n))return function(n){return n(n)}(function(t){return n(function(){return t(t).apply(void 0,arguments)})});throw"combinators::fixed awaits function but saw "+n},vn=function n(t,r,u){return e(t.length-u.length,function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];var f=u.concat(o).filter(function(n){return void 0!==n});return t.length<=f.length?r(t,f):n(t,r,f)})},yn=function(n){var t=0;if(w(n))return e(n.length,function(){return 0===t?(t=1,n.apply(void 0,arguments)):null});throw"decorators::once awaits a function but saw "+n},pn=function(n){if(w(n))return e(n.length,function(){return!n.apply(void 0,arguments)});throw"decorators::not awaits a function but saw "+n},hn=function(n){if(w(n))return e(n.length,function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.apply(void 0,Y(e.reverse()))});throw"decorators::flip awaits a function but saw "+n},dn=function(n){if(w(n))return n.length<2?n:vn(n,function(n,t){return n.apply(void 0,Y(t))},[]);throw"decorators::curry awaits a function but saw "+n},mn=function(n){if(w(n))return n.length<2?n:vn(n,function(n,t){return n.apply(void 0,Y(t.reverse()))},[]);throw"decorators::curryRight awaits a function but saw "+n},wn=function n(t){for(var e=arguments.length,r=Array(e>1?e-1:0),u=1;u<e;u++)r[u-1]=arguments[u];var o,i=r;if(w(t))return i.length<t.length&&(o=new Array(Math.max(0,t.length-i.length)),i=[].concat(Y(i),Y(o.fill(void 0)))),function(){for(var e=arguments.length,r=Array(e),u=0;u<e;u++)r[u]=arguments[u];var o=i.map(function(n){return c(n)?r.shift():n});return o.lastIndexOf(void 0)<0?t.apply(void 0,Y(o)):n.apply(void 0,[t].concat(Y(o)))};throw"decorators::partial awaits a function but saw "+t},kn=function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];var u,o=e;if(w(n))return o.length<n.length&&(u=new Array(Math.max(0,n.length-o.length)),o=[].concat(Y(o),Y(u.fill(void 0)))),function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var u=o.map(function(n){return c(n)?e.shift():n});return u.lastIndexOf(void 0)<0?n.apply(void 0,Y(u.reverse())):wn.apply(void 0,[n].concat(Y(u)))};throw"decorators::partialRight awaits a function but saw "+n},gn=function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0===r)return function(e,r){return n(t,e,r)};if(w(t)&&w(r))return w(u)?e(r.length,function(){return t.apply(void 0,arguments)?r.apply(void 0,arguments):u.apply(void 0,arguments)}):e(r.length,function(){return t.apply(void 0,arguments)?r.apply(void 0,arguments):null});throw"decorators::ifElse awaits (fn, fn fn?), but saw "+[t,r,u]},bn=gn,On=function(n){var t={};if(w(n))return e(n.length,function(){for(var e=arguments.length,r=Array(e),u=0;u<e;u++)r[u]=arguments[u];var o=JSON.stringify(r);return t.hasOwnProperty(o)||(t[o]=n.apply(void 0,r)),t[o]});throw"decorators::memoize awaits a function but saw "+n},An=Object.prototype.hasOwnProperty,Mn=function(n,t,e){for(var r=t,u=null;;){if(u=n(r,e),u.done){w(e.return)&&e.return();break}r=u.value}return r},Sn=function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return function(t){for(var r=arguments.length,u=Array(r>1?r-1:0),o=1;o<r;o++)u[o-1]=arguments[o];var i=s(n)&&w(t[n])?t[n].apply(t,e.concat(u)):w(n)?n.call.apply(n,[t].concat(e,u)):null;return null==i?t:i}},xn=u(function(n,t){return S(t)?t.has(n):An.call(t,n)}),Pn=u(function(n,t){return(s(n)&&/\./.test(n)?n.split("."):[n]).reduce(function(n,t){return a(n)?S(n)&&n.has(t)?n.get(t):a(n[t])?n[t]:null:null},t)}),jn=Pn,In=o(function(n,t,e){var r=n,u=e;return g(e)?(u=[].concat(Y(e)),r=parseInt(r,10),v(r)&&r<e.length&&r>=0&&(u[r]=t),u):k(e)?(u=Object.assign({},e),s(r)&&(u[r]=t),u):(S(e)&&(u=new Map(e.entries()),u.set(r,t)),u)}),Rn=function n(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length>1?Object.assign.apply(Object,[{}].concat(e)):function(){for(var t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];return n.apply(void 0,e.concat(r))}},En=function(n){return Object.freeze(Object.assign({},n))},Nn=function(n){return S(n)?[].concat(Y(n.entries())):Object.keys(n).map(function(t){return[t,n[t]]})},Tn=function(n,t){return t instanceof n?t:Object.create(n.prototype)},Ln=u(function(n,t){if(v(n)&&v(t))return n+t;if(w(n)&&w(t))return function(){return t(n.apply(void 0,arguments))};if(a(n)&&w(n.concat))return n.concat(t);throw"concat :: Unable to concatenate items "+[n,t]}),_n=function(n){return n[0]},Fn=function(n){return[_n(n)]},Un=function(n){var t=n;return g(n)?n.slice(0,n.length-1):E(n)?(t=Array.from(n),t.slice(0,t.length-1)):[]},qn=function(n){return n[n.length-1]},zn=function(n){return[qn(n)]},Vn=function(n){return g(n)?n.slice(1):E(n)?Array.from(n).slice(1):[]},Wn=u(function(n,t){return v(n)&&(s(t)||g(t))?t[Math.max(0,Math.min(t.length,Math.abs(n)))]:E(t)?Wn(n,Array.from(t)):t}),Cn=u(function(n,t){return g(t)?t.join(n):t}),Dn=u(function(n,t){return s(t)?t.split(n):t}),Gn=o(function(n,t,e){return O(n)&&s(e)?e.replace(n,t):e}),Bn=function(n){return s(n)?n.toUpperCase():n},Jn=function(n){return s(n)?n.toLowerCase():n},Hn=function(n){return s(n)?n.trim():n},Kn=function(n){return g(n)?n.slice().reverse():s(n)?n.split("").reverse().join(""):E(n)?Array.from(n).reverse():n},Qn=function(n){return Array.from(n).reduce(function(n,t){return n.lastIndexOf(t)<0?[].concat(Y(n),[t]):n},[])},Xn=u(function(n,t){return Qn([].concat(Y(n),Y(t)))}),Yn=u(function(n,t){var e=n,r=t;if(E(n)&&E(t))return e=Array.from(n),r=Array.from(t),Xn(e,r).filter(function(n){return e.indexOf(n)>-1&&r.indexOf(n)>-1});throw"operators::intersect awaits two iterables but saw "+[n,t]}),Zn=u(function(n,t){var e=n,r=t;if(E(n)&&E(t))return e=Array.from(n),r=Array.from(t),Xn(e,r).filter(function(n){return e.indexOf(n)<0||r.indexOf(n)<0});throw"operators::differ awaits two iterables but saw "+[n,t]}),$n=u(function(n,t){return g(n)&&g(t)?n.length>t.length?t.map(function(t,e){return[n[e],t]}):n.map(function(n,e){return[n,t[e]]}):[[n,t]]}),nt=o(function(n,t,e){if(w(e.fold))return e.fold(n,t);if(w(e.reduce))return e.reduce(n,t);var r=tn(function(n,t,e){return e.length<1?t:$(r,n,n(t,_n(e)),Vn(e))});return r(n,t,Array.from(e))}),tt=o(function(n,t,e){if(w(e.foldRight))return e.foldRight(n,t);if(w(e.reduceRight))return e.reduceRight(n,t);var r=tn(function(n,t,e){return e.length<1?t:$(r,n,n(t,qn(e)),Un(e))});return r(n,t,Array.from(e))}),et=u(function(n,t){var e=tn(function(n,t,r){var u=n(t);return null==u?r:$(e,n,u[1],[].concat(Y(r),[u[0]]))});return e(n,t,[])}),rt=u(function(n,t){return et(function(n){return n<=t?[n,n+1]:null},n)}),ut=u(function(n,t){return nt(function(t,e){return n(e)?[].concat(Y(t),[e]):t},[],t)}),ot=function(n){return ut(function(n){return null!=n},n)},it=u(function(n,t){var e=Math.round(Math.abs(n));return nt(function(n,t){return e>0?(e-=1,n):[].concat(Y(n),[t])},[],Array.from(t))}),ft=u(function(n,t){var e=!0;return nt(function(t,r){return e=e&&!!n(r),e?t:[].concat(Y(t),[r])},[],Array.from(t))}),at=u(function(n,t){var e=0;return N(t)?Mn(function(t,r){var u=r.next();return u.done||e>=n?{done:!0,value:t}:(e+=1,{value:[].concat(Y(t),[u.value])})},[],t):nt(function(t,r){return e<n?(e+=1,[].concat(Y(t),[r])):t},[],Array.from(t))}),ct=u(function(n,t){var e=!0;return N(t)?Mn(function(t,r){var u=r.next();return u.done||!(e=!!n(u.value))?{done:!0,value:t}:{value:[].concat(Y(t),[u.value])}},[],t):nt(function(t,r){return e&&(e=!!n(r))?[].concat(Y(t),[r]):t},[],Array.from(t))}),lt=u(function(n,t){return nt(function(t,e){return null==t&&n(e)?e:t},null,t)}),st=u(function(n,t){return lt(n,Array.from(t).reverse())}),vt=u(function(n,t){return w(n)&&!w(n.empty)?nt(function(t,e){return t.concat(n(e))},n(t[0]),t.slice(1)):C(n)?nt(function(n,t){return n.concat(n.of(t))},n,t):nt(function(t,e){return t.concat(n.of(e))},n.empty(),t)}),yt=u(function(n,t){return _(t)?t.equals(n):n===t}),pt=u(function(n,t){if(w(n))return F(t)?t.map(n):k(t)?Object.keys(t).reduce(function(e,r){return e[r]=n(t[r],r,t),e},{}):E(t)?Array.from(t).map(n):t;throw"operators::map awaits a function as first argument but saw "+n}),ht=u(function(n,t){if(w(n))return F(t)?t.map(n):k(t)?pt(n,t):n(t);if(U(n))return F(t)?n.ap(t):k(t)?n.ap({map:function(n){return pt(n,t)}}):n.ap([t])[0];throw"operators::ap awaits apply/function as first argument but saw "+n}),dt=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(k(n)&&!w(n.flatten))return n;if(w(n.flatten))return n.flatten();if(g(n)){if(!t)return n.reduce(function(n,t){return n.concat(t)},[]);var e=tn(function(n,t){return t.length<1?n:g(t[0])?$(e,n,[].concat(Y(t[0]),Y(t.slice(1)))):$(e,[].concat(Y(n),[t[0]]),t.slice(1))});return e([],n)}throw"operators::flatten awaits Monad or array but saw "+n},mt=u(function(n,t){if(w(n))return w(t.flatMap)?t.flatMap(n):dt(pt(n,t),!1);throw"operators::flatMap awaits function as 1. argument but saw "+n}),wt=o(function(n,t,e){if(w(n)&&w(t.of)){if(w(e.traverse))return e.traverse(n,t);if(g(e))return e.reduce(function(t,e){return t.concat(n(e))},t.of([]));throw"operators::traverse cannot act on "+e}throw"operators::traverse awaits function & applicative, saw "+[n,t]}),kt=u(function(n,t){return wt(function(n){return n},n,t)}),gt=function(n){return{value:n,map:function(){return this}}},bt=function n(t){return{value:t,map:function(e){return n(e(t))}}},Ot=function(n,t){return function(){return n(t.apply(void 0,arguments))}},At=dn(function(n,t,e,r,u){return pt(function(n){return t(e,n,u)},r(n(e,u)))}),Mt=At(jn,In),St=dn(function(n,t){return n(gt)(t).value}),xt=dn(function(n,t,e){return n(function(n){return bt(t(n))})(e).value}),Pt=dn(function(n,t,e){return xt(n,function(){return t},e)}),jt=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.reduce(function(n,t){return xn(t,n)||(n[t]=Mt(t)),n},{index:Mt})},It=dn(function(n,t){return bt(pt(Ot(jn("value"),n),t))}),Rt="@@transducer/step",Et="@@transducer/init",Nt="@@transducer/result";n.isReduced=function(n){return!f(n)&&n.reduced},n.reduce=function(n){return{value:n,reduced:!0}},n.deref=function(n){return n&&void 0!==n.value?n.value:null};var Tt=dn(function(t,e,r){var u=w(t)?n(t):t,o=e;if(k(r)&&!N(r)){var i=Object.keys(r),f=!0,a=!1,c=void 0;try{for(var l,s=i[Symbol.iterator]();!(f=(l=s.next()).done);f=!0){var v=l.value;if(o=u[Rt](o,[r[v],v]),n.isReduced(o)){o=n.deref(o);break}}}catch(n){a=!0,c=n}finally{try{!f&&s.return&&s.return()}finally{if(a)throw c}}return u[Nt](o)}var y=!0,p=!1,h=void 0;try{for(var d,m=r[Symbol.iterator]();!(y=(d=m.next()).done);y=!0){var g=d.value;if(o=u[Rt](o,g),n.isReduced(o)){o=n.deref(o);break}}}catch(n){p=!0,h=n}finally{try{!y&&m.return&&m.return()}finally{if(p)throw h}}return w(r.return)&&r.return(),u[Nt](o)}),Lt=dn(function(t,e,r,u){return Tt(t(w(e)?n(e):e),r,u)}),_t=dn(function(n,t,e){if(g(n))return Lt(t,function(n,t){return[].concat(Y(n),[t])},n,e);if(k(n))return Lt(t,function(n,t){var e=X(t,2),r=e[0],u=e[1],o=Object.assign({},n);return o[u]=r,o},n,e);if(v(n)||s(n))return Lt(t,function(n,t){return n+t},n,e);throw"transducers::into got unknown inital value, use ::transduce with a special step function"}),Ft=function(n){return function(t){var e;return e={},H(e,Et,function(){return t[Et]()}),H(e,Rt,function(e,r){return t[Rt](e,n(r))}),H(e,Nt,function(n){return t[Nt](n)}),e}},Ut=function(n){return function(t){var e;return e={},H(e,Et,function(){return t[Et]()}),H(e,Rt,function(e,r){return n(r)?t[Rt](e,r):e}),H(e,Nt,function(n){return t[Nt](n)}),e}},qt=function(t){var e;return e={},H(e,Et,function(){return t[Et]()}),H(e,Rt,function(e,r){var u;return Tt((u={},H(u,Et,function(){return t[Et]()}),H(u,Rt,function(e,r){var u=t[Rt](e,r);return n.isReduced(u)?n.deref(u):u}),H(u,Nt,function(n){return n}),u),e,r)}),H(e,Nt,function(n){return t[Nt](n)}),e},zt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){var e,r=n;return e={},H(e,Et,function(){return t[Et]()}),H(e,Rt,function(n,e){return r>0?(r-=1,n):t[Rt](n,e)}),H(e,Nt,function(n){return t[Nt](n)}),e}},Vt=function(n){return function(t){var e,r=!0,u=!1;return e={},H(e,Et,function(){return t[Et]()}),H(e,Rt,function(e,o){return!u&&(r=!!n(o))?e:(u=!0,t[Rt](e,o))}),H(e,Nt,function(n){return t[Nt](n)}),e}},Wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){var r,u=0;return r={},H(r,Et,function(){return e[Et]()}),H(r,Rt,function(r,o){return u<t?(u+=1,e[Rt](r,o)):n.reduce(r)}),H(r,Nt,function(n){return e[Nt](n)}),r}},Ct=function(t){return function(e){var r,u=!0;return r={},H(r,Et,function(){return e[Et]()}),H(r,Rt,function(r,o){return u=!!t(o),u?e[Rt](r,o):n.reduce(r)}),H(r,Nt,function(n){return e[Nt](n)}),r}},Dt=function(n){var t;return t={},H(t,Et,function(){return n[Et]()}),H(t,Rt,function(t,e){return f(e)?t:n[Rt](t,e)}),H(t,Nt,function(t){return n[Nt](t)}),t},Gt=function(n){var t,e=Object.create(null);return t={},H(t,Et,function(){return n[Et]()}),H(t,Rt,function(t,r){return e[r]?t:(e[r]=!0,n[Rt](t,r))}),H(t,Nt,function(t){return n[Nt](t)}),t},Bt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){var e,r,u=[];return e={},H(e,Et,function(){return t[Et]()}),H(e,Rt,function(e,o){return u.length<n?(u.push(o),e):(r=t[Rt](e,u),u=[o],r)}),H(e,Nt,function(n){return u.length>0?t[Nt](t[Rt](n,u)):t[Nt](n)}),e}},Jt=function(n){return function(t){var e,r,u,o,i=[];return e={},H(e,Et,function(){return t[Et]()}),H(e,Rt,function(e,f){return u=n(f),i.length<1?(o=u,i.push(f),e):o===u?(i.push(f),e):(o=u,r=t[Rt](e,i),i=[f],r)}),H(e,Nt,function(n){return i.length>0?t[Nt](t[Rt](n,i)):t[Nt](n)}),e}},Ht=Object.freeze({fold:Tt,transduce:Lt,into:_t,map:Ft,filter:Ut,flatten:qt,drop:zt,dropWhile:Vt,take:Wt,takeWhile:Ct,keep:Dt,unique:Gt,partition:Bt,partitionWith:Jt}),Kt=Symbol("MonoidalValue"),Qt=function(n){return n||null},Xt=(function(){function n(){B(this,n),this[Kt]=null}J(n,[{key:"concat",value:function(n){return n}},{key:"fold",value:function(n){return n()}}],[{key:"empty",value:function(){return new n}},{key:"of",value:function(){return new n}}])}(),function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(t)}},{key:"concat",value:function(t){return new n(this[Kt]+t[Kt])}},{key:"fold",value:function(n){return n(this[Kt])}}],[{key:"empty",value:function(){return new n(0)}},{key:"of",value:function(t){return new n(t)}}]),n}()),Yt=function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(t)}},{key:"concat",value:function(t){return new n(this[Kt]+t[Kt])}},{key:"fold",value:function(n){return n(this[Kt])}}],[{key:"empty",value:function(){return new n("")}},{key:"of",value:function(t){return new n(t)}}]),n}(),Zt=function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(t)}},{key:"concat",value:function(t){return new n(this[Kt]*t[Kt])}},{key:"fold",value:function(n){return n(this[Kt])}}],[{key:"empty",value:function(){return new n(1)}},{key:"of",value:function(t){return new n(t)}}]),n}(),$t=function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(t)}},{key:"concat",value:function(t){return new n(this[Kt]&&t[Kt])}},{key:"fold",value:function(n){return n(this[Kt])}}],[{key:"empty",value:function(){return new n(!0)}},{key:"of",value:function(t){return new n(t)}}]),n}(),ne=function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(t)}},{key:"concat",value:function(t){return new n(this[Kt]||t[Kt])}},{key:"fold",value:function(n){return n(this[Kt])}}],[{key:"empty",value:function(){return new n(!1)}},{key:"of",value:function(t){return new n(t)}}]),n}(),te=function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(function(){return t})}},{key:"concat",value:function(t){var e=this;return new n(function(n){return t[Kt](e[Kt](n))})}},{key:"fold",value:function(n,t){return n(this[Kt](t))}}],[{key:"empty",value:function(){return new n(Qt)}},{key:"of",value:function(t){return new n(function(){return t})}}]),n}(),ee=function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(t)}},{key:"concat",value:function(t){return new n(Math.min(this[Kt],t[Kt]))}},{key:"fold",value:function(n){return n(this[Kt])}}],[{key:"empty",value:function(){return new n(1/0)}},{key:"of",value:function(t){return new n(t)}}]),n}(),re=function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(t)}},{key:"concat",value:function(t){return new n(Math.max(this[Kt],t[Kt]))}},{key:"fold",value:function(n){return n(this[Kt])}}],[{key:"empty",value:function(){return new n(-1/0)}},{key:"of",value:function(t){return new n(t)}}]),n}(),ue=function(){function n(t){B(this,n),this[Kt]=t}return J(n,[{key:"of",value:function(t){return new n(t)}},{key:"concat",value:function(t){return new n(Object.assign({},this[Kt],t[Kt]))}},{key:"fold",value:function(n){return n(this[Kt])}}],[{key:"empty",value:function(){return new n({})}},{key:"of",value:function(t){return new n(t)}}]),n}(),oe=Symbol("TypeValue"),ie=Symbol("TypeName"),fe={NO_NAME:"Type awaits string and definition as arguments.\n>   Name is missing or empty string.",NO_DEF:"Type awaits string and definition as argument.\n>   Definition is missing or none of:\n    - Function (x) => boolean\n    - Object of pairs {key: (x) => boolean}\n    - Array of functions [(x) => boolean]"},ae=function(n,t){return!(!w(n)||!n(t))||(T(w,n)&&g(t)?n.length>1?n.length===t.length&&n.every(function(n,e){return n(t[e])}):t.every(function(t){return n[0](t)}):!(!k(n)||!k(t))&&Object.keys(n).reduce(function(e,r){return e&&!f(t[r])&&n[r](t[r])},!0))},ce=function(n,t){function e(r){var u=Tn(e,this);if(u[ie]=n,ae(t,r))return u[oe]=r,u;throw"Type "+n+" got invalid value "+JSON.stringify(r)}if(!s(n)||""===n.trim())throw fe.NO_NAME;if(!w(t)&&!k(t)&&!T(w,t))throw fe.NO_DEF;return Object.defineProperties(e,{of:{writable:!1,enumerable:!0,value:function(n){return new e(n)}},is:{writable:!1,enumerable:!0,value:function(n){return e.prototype.isPrototypeOf(n)}}}),Object.defineProperties(e.prototype,{toString:{writable:!1,enumerable:!0,value:function(){var t=this;return k(this[oe])?n+"("+Object.keys(this[oe]).reduce(function(n,e){return n?n+", "+t[oe][e].toString():t[oe][e].toString()},"")+")":n+"("+this[oe].toString()+")"}},valueOf:{writable:!1,enumerable:!0,value:function(){return this[oe]}},fold:{writable:!1,enumerable:!0,value:function(t,e){if(w(t))return t(this[oe],e);throw n+"::fold expected argument to be function but saw "+t}}}),e},le=dn(ce);le.isType=function(n){return!f(n)&&!f(n[oe])&&s(n[ie])},le.cata=dn(function(n,t){if(null!=t){if(le.isType(t)&&w(n[t[ie]]))return n[t[ie]](t[oe]);if(w(n[t.constructor.name]))return n[t.constructor.name](t)}if(w(n.orElse))return n.orElse(le.isType(t)?t[oe]:t);throw"Type.cata :: Unable to pattern match "+t});var se=Symbol("MonadicValue"),ve=function(){function n(t){B(this,n),this.value=t}return J(n,[{key:"toString",value:function(){return"Identity("+this.value+")"}},{key:"equals",value:function(t){return n.prototype.isPrototypeOf(t)&&t.value===this.value}},{key:"map",value:function(t){if(w(t))return new n(t(this.value));throw"Identity::map expects argument to be function but saw "+t}},{key:"of",value:function(t){return n.of(t)}},{key:"ap",value:function(n){if(w(n.map))return n.map(this.value);throw"Identity::ap expects argument to be Functor but saw "+n}},{key:"flatMap",value:function(n){if(w(n))return this.map(n).value;throw"Identity::flatMap expects argument to be function but saw "+n}},{key:"flatten",value:function(){return this.value}},{key:"fold",value:function(n){return n(this.value)}},{key:"traverse",value:function(t,e){if(w(t))return e.of(this.fold(t)).map(n.of);throw"Identity::traverse expects function but saw "+t}},{key:"sequence",value:function(n){return this.traverse(function(n){return n},n)}},{key:"concat",value:function(t){return this.fold(function(e){return n.of(e.concat(t.value))})}},{key:"value",set:function(n){this[se]=n},get:function(){return this[se]}}],[{key:"is",value:function(t){return n.prototype.isPrototypeOf(t)}},{key:"fromMaybe",value:function(t){return t.fold(n.of,n.of)}},{key:"fromEither",value:function(t){return t.fold(n.of,n.of)}},{key:"fromList",value:function(t){return t.fold(function(t){return n.of(t[0])})}},{key:"fromIO",value:function(t){return n.of(t.try())}},{key:"of",value:function(t){return new n(t)}}]),n}(),ye=Symbol("MonadicValue"),pe=function(){function n(t){B(this,n),this.value=t}return J(n,[{key:"toString",value:function(){return"Maybe"}},{key:"isSome",value:function(){return null!=this.value}},{key:"equals",value:function(t){return n.prototype.isPrototypeOf(t)&&t.value===this.value}},{key:"map",value:function(t){return this.fold(function(){return new de},function(e){return n.of(t(e))})}},{key:"of",value:function(t){return n.of(t)}},{key:"ap",value:function(n){return this.fold(function(){return new de},function(t){return n.map(t)})}},{key:"flatMap",value:function(n){return this.map(n).flatten()}},{key:"flatten",value:function(){return this.isSome()?this.value:this}},{key:"orGet",value:function(n){return this.isSome()?this.value:n}},{key:"orElse",value:function(t){return this.isSome()?this:n.of(t)}},{key:"fold",value:function(n,t){return this.isSome()?t(this.value):n(this.value)}},{key:"cata",value:function(n){var t=n.None,e=n.Some;return this.fold(t,e)}},{key:"traverse",value:function(t,e){if(w(t))return e.of(this.fold(function(){return null},t)).map(n.of);throw"Maybe::traverse expects function but saw "+t}},{key:"sequence",value:function(n){return this.traverse(function(n){return n},n)}},{key:"biMap",value:function(t,e){if(w(t)&&w(e))return n.of(this.fold(t,e));throw"Maybe::biMap expects functions but saw "+t+", "+e}},{key:"concat",value:function(n){return this.fold(function(){return n},function(t){return n.isSome()?he.of(t.concat(n.value)):he.of(t)})}}],[{key:"None",value:function(){return new de}},{key:"Some",value:function(n){return new he(n)}},{key:"fromIdentity",value:function(t){return t.fold(n.of)}},{key:"fromEither",value:function(n){return n.fold(de.of,he.of)}},{key:"fromList",value:function(t){return t.fold(function(t){return n.of(t[0])})}},{key:"fromIO",value:function(t){return t.fold(function(t){return Error.prototype.isPrototypeOf(t)?new de:n.of(t)})}},{key:"is",value:function(t){return n.prototype.isPrototypeOf(t)}},{key:"of",value:function(n){return f(n)?new de:new he(n)}},{key:"empty",value:function(){return new de}}]),n}(),he=function(n){function t(n){return B(this,t),Q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n))}return K(t,n),J(t,[{key:"toString",value:function(){return"Some("+this.value+")"}},{key:"value",set:function(n){this[ye]=n},get:function(){return this[ye]}}],[{key:"of",value:function(n){return new t(n)}}]),t}(pe),de=function(n){function t(){return B(this,t),Q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null))}return K(t,n),J(t,[{key:"toString",value:function(){return"None"}},{key:"value",set:function(n){this[ye]=n},get:function(){return this[ye]}}],[{key:"of",value:function(){return new t}}]),t
}(pe),me=Symbol("MonadicValue"),we=Symbol("Either.isRight"),ke=function(n){return!f(n)&&!Error.prototype.isPrototypeOf(n)},ge=function(){function n(t,e){if(B(this,n),ke(e))return this.value=e,this[we]=!0,this;this.value=null!=t?t:null,this[we]=!1}return J(n,[{key:"toString",value:function(){return this.isRight()?"Right("+this.value+")":"Left("+this.value+")"}},{key:"isRight",value:function(){return!!this[we]}},{key:"equals",value:function(t){return n.is(t)&&t.value===this.value}},{key:"ap",value:function(n){var t=this;return this.fold(function(){return t},function(t){return n.map(t)})}},{key:"concat",value:function(n){return this.fold(function(){return n},function(t){return n.isRight()?be.of(t.concat(n.value)):be.of(t)})}},{key:"map",value:function(n){if(w(n))return this.fold(function(n){return Oe.of(n)},function(t){return be.of(n(t))})}},{key:"mapLeft",value:function(n){return this.fold(function(t){return Oe.of(n(t))},function(n){return be.of(n)})}},{key:"flatMap",value:function(n){return this.map(n).flatten()}},{key:"flatten",value:function(){return this.isRight()?this.value:this}},{key:"fold",value:function(n,t){return this.isRight()?t(this.value):n(this.value)}},{key:"cata",value:function(n){var t=n.Left,e=n.Right;return this.fold(t,e)}},{key:"traverse",value:function(n,t){if(w(n))return this.fold(function(n){return t.of(n).map(Oe.of)},function(e){return t.of(n(e)).map(be.of)});throw"Either::traverse expects function but saw "+n}},{key:"sequence",value:function(n){return this.traverse(function(n){return n},n)}},{key:"biMap",value:function(n,t){return this.fold(function(t){return Oe.of(n(t))},function(n){return be.of(t(n))})}},{key:"swap",value:function(){return this.fold(function(n){return be.of(n)},function(n){return Oe.of(n)})}},{key:"orGet",value:function(n){return this.fold(function(){return n},function(n){return n})}},{key:"orElse",value:function(n){return this.fold(function(){return ke(n)?be.of(n):Oe.of(n)},function(n){return be.of(n)})}},{key:"value",set:function(n){this[me]=n},get:function(){return this[me]}}],[{key:"Left",value:function(t){return new n(t,null)}},{key:"Right",value:function(t){return new n(null,t)}},{key:"fromNullable",value:function(n){return ke(n)?be.of(n):Oe.of(n)}},{key:"fromIdentity",value:function(t){return t.fold(n.fromNullable)}},{key:"fromMaybe",value:function(t){return t.fold(n.empty,n.of)}},{key:"fromList",value:function(n){return n.fold(function(n){return ke(n[0])?be.of(n[0]):Oe.of(n[0])})}},{key:"fromIO",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),u=1;u<e;u++)r[u-1]=arguments[u];return n.try(t.run).apply(void 0,r)}},{key:"try",value:function(n,t){if(w(n))return e(n.length,function(){try{return be.of(n.apply(void 0,arguments))}catch(n){return void 0!==t?be.of(t):Oe.of(n)}});throw"Either::try expects argument to be function but saw "+n}},{key:"is",value:function(t){return n.prototype.isPrototypeOf(t)}},{key:"of",value:function(n){return be.of(n)}},{key:"empty",value:function(){return Oe.of(null)}}]),n}(),be=function(n){function t(n){return B(this,t),Q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,n))}return K(t,n),J(t,[{key:"toString",value:function(){return"Right("+this.value+")"}},{key:"value",set:function(n){this[me]=n},get:function(){return this[me]}}],[{key:"of",value:function(n){return new t(n)}}]),t}(ge),Oe=function(n){function t(n){return B(this,t),Q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,null))}return K(t,n),J(t,[{key:"toString",value:function(){return"Left("+this.value+")"}},{key:"value",set:function(n){this[me]=n},get:function(){return this[me]}}],[{key:"of",value:function(n){return new t(n)}}]),t}(ge),Ae=Symbol("MonadicValue"),Me=function(){function n(t){B(this,n),this.value=t}return J(n,[{key:"toString",value:function(){return"List(["+this.value+"])"}},{key:"toArray",value:function(){return this.value}},{key:"equals",value:function(t){var e=this;return n.prototype.isPrototypeOf(t)&&(t.value===this.value||t.value.length===this.value.length&&t.value.every(function(n,t){return n===e.value[t]}))}},{key:"map",value:function(t){if(w(t))return new n(this.value.map(t));throw"List::map expects argument to be function but saw "+t}},{key:"of",value:function(){return n.of.apply(n,arguments)}},{key:"ap",value:function(n){if(w(n.map))return n.map(this.value[0]);throw"List::ap expects argument to be Functor but saw "+n}},{key:"flatMap",value:function(n){if(w(n))return this.map(n).flatten();throw"List::flatMap expects argument to be function but saw "+n}},{key:"flatten",value:function(){return this.value.reduce(function(n,t){return n.concat(t)})}},{key:"fold",value:function(n){return n(this.value)}},{key:"traverse",value:function(t,e){if(w(t))return e.of(this.value.reduce(function(e,r){return e.concat(n.of(t(r)))},n.empty()));throw"List::traverse expects function but saw "+t}},{key:"sequence",value:function(n){return this.traverse(function(n){return n},n)}},{key:"concat",value:function(t){return new n(this.value.concat(t.toArray()))}},{key:"value",set:function(n){this[Ae]=n},get:function(){return this[Ae]}}],[{key:"is",value:function(t){return n.prototype.isPrototypeOf(t)}},{key:"fromIdentity",value:function(t){return t.fold(n.of)}},{key:"fromMaybe",value:function(t){return t.fold(n.empty,n.of)}},{key:"fromEither",value:function(t){return t.fold(n.empty,n.of)}},{key:"fromIO",value:function(t){var e=t.try();return null==e?n.empty():n.of(e)}},{key:"fromArray",value:function(t){return new n(t)}},{key:"empty",value:function(){return new n([])}},{key:"of",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return new n(e)}}]),n}(),Se=Symbol("MonadicValue"),xe=function(){function n(t){B(this,n),this.run=t}return J(n,[{key:"toString",value:function(){return"IO"}},{key:"equals",value:function(t){return n.prototype.isPrototypeOf(t)&&this.run===t.run}},{key:"map",value:function(t){var e=this;if(w(t))return new n(function(n){return t(e.run(n))});throw"IO::map expects argument to be function but saw "+t}},{key:"of",value:function(t){return n.of(t)}},{key:"ap",value:function(n){if(w(n.map))return n.map(this.run());throw"IO::ap expects argument to be Functor but saw "+n}},{key:"flatMap",value:function(n){if(w(n))return this.map(n).flatten();throw"IO::flatMap expects argument to be function but saw "+n}},{key:"flatten",value:function(){return this.run()}},{key:"fold",value:function(n,t){return n(this.run(t))}},{key:"traverse",value:function(t,e){if(w(t))return e.of(this.fold(t)).map(n.of);throw"IO::traverse expects function but saw "+t}},{key:"sequence",value:function(n){return this.traverse(function(n){return n},n)}},{key:"concat",value:function(t){var e=this;return new n(function(n){return t.run(e.run(n))})}},{key:"try",value:function(n){try{return this.fold(function(n){return n},n)}catch(n){return n}}},{key:"run",set:function(n){this[Se]=n},get:function(){return this[Se]}}],[{key:"is",value:function(t){return n.prototype.isPrototypeOf(t)}},{key:"fromIdentity",value:function(t){return t.fold(n.of)}},{key:"fromMaybe",value:function(t){return t.fold(n.empty,n.of)}},{key:"fromEither",value:function(t){return t.fold(n.of,n.of)}},{key:"fromList",value:function(t){return t.fold(function(t){return n.of(t[0])})}},{key:"of",value:function(t){return new n(function(){return t})}},{key:"empty",value:function(){return new n(function(n){return n})}}]),n}(),Pe=Symbol("MonadicValue"),je=Symbol("RunState"),Ie=function(){function n(t){B(this,n),this.compute=t}return J(n,[{key:je,value:function(n){return this.compute(n)}},{key:"toString",value:function(){return"State"}},{key:"map",value:function(t){var e=this;if(w(t))return new n(function(n){var r=e[je](n),u=X(r,2),o=u[0],i=u[1];return[t(o),i]});throw"State::map expects argument to be function but saw "+t}},{key:"of",value:function(t){return n.of(t)}},{key:"ap",value:function(n){if(w(n.map))return this.flatMap(n.map.bind(n));throw"State::ap expects argument to be Functor but saw "+n}},{key:"flatMap",value:function(n){if(w(n))return this.map(n).flatten();throw"State::flatMap expects argument to be function but saw "+n}},{key:"flatten",value:function(){var t=this;return new n(function(n){var e=t[je](n),r=X(e,2),u=r[0],o=r[1];return u[je](o)})}},{key:"fold",value:function(n,t){return n(this.run(t))}},{key:"foldExec",value:function(n,t){return n(this.exec(t))}},{key:"run",value:function(n){return this[je](n)[0]}},{key:"exec",value:function(n){return this[je](n)[1]}},{key:"compute",set:function(n){this[Pe]=n},get:function(){return this[Pe]}}],[{key:"get",value:function(){return new n(function(n){return[n,n]})}},{key:"put",value:function(t){return new n(function(){return[null,t]})}},{key:"modify",value:function(t){return n.get().flatMap(function(e){return n.put(t(e))})}},{key:"is",value:function(t){return n.prototype.isPrototypeOf(t)}},{key:"of",value:function(t){return new n(function(n){return[t,n]})}}]),n}(),Re=Symbol("MonadicFork"),Ee=Symbol("MonadicCleanUp"),Ne=function(n){return"undefined"!=typeof setImmediate?setImmediate(n):"undefined"!=typeof process?process.nextTick(n):setTimeout(n,0)},Te=function(){},Le=function(){function n(t,e){B(this,n),this.run=t,this.cleanUp=e}return J(n,[{key:"toString",value:function(){return"Task"}},{key:"toPromise",value:function(t){return n.toPromise(this,t)}},{key:"equals",value:function(t){return n.prototype.isPrototypeOf(t)&&t.run===this.run}},{key:"map",value:function(t){var e=this;if(w(t))return new n(function(n,r){return e.run(function(t){return n(t)},function(n){return r(t(n))})},this.cleanUp);throw"Task::map expects argument to be function but saw "+t}},{key:"of",value:function(t){return n.of(t)}},{key:"ap",value:function(t){var e=this.run,r=t.run,u=this.cleanUp,o=t.cleanUp,i=function(n,t){u(n),o(t)};return new n(function(n,t){var u=!1,o=!1,f=!1,a=!1,c=[],l=!1,s=function(t){if(!l)return l=!0,n(t)},v=function(n){return function(e){if(!l)return n(e),a&&o?(Ne(function(){return i(c[0],c[1])}),t(u(f))):e}},y=e(s,v(function(n){o=!0,u=n})),p=r(s,v(function(n){a=!0,f=n}));return c=[y,p]},i)}},{key:"flatMap",value:function(t){var e=this;if(w(t))return new n(function(n,r){return e.run(function(t){return n(t)},function(e){return t(e).run(n,r)})},this.cleanUp);throw"Task::flatMap expects argument to be function but saw "+t}},{key:"flatten",value:function(){var t=this;return new n(function(n,e){return t.run().run(n,e)},this.cleanUp)}},{key:"fold",value:function(n,t){if(w(t)&&w(n))return this.run(n,t);throw"Task::fold expects arguments to be functions but saw "+[n,t]}},{key:"cata",value:function(n){var t=n.Reject,e=n.Resolve;if(w(e)&&w(t))return this.fold(t,e);throw"Task::cata expected Object of {Reject, Resolve}"}},{key:"biMap",value:function(t,e){var r=this;if(w(e)&&w(t))return new n(function(n,t){return r.fold(n,t)},this.cleanUp);throw"Task::biMap expected arguments to be functions but saw "+[t,e]}},{key:"swap",value:function(){var t=this;return new n(function(n,e){return t.run(e,n)},this.cleanUp)}},{key:"mapRejected",value:function(t){var e=this;if(w(t))return new n(function(n,r){return e.run(function(e){return n(t(e))},r)},this.cleanUp)}},{key:"concat",value:function(t){if(n.is(t)){var e=this.run,r=t.run,u=this.cleanUp,o=t.cleanUp,i=function(n,t){u(n),o(t)};return new n(function(n,t){var u=void 0,o=!1,f=void 0,a=void 0,c=function(n){return function(t){o||(o=!0,Ne(function(){return i(u[0],u[1])}),n(t))}};return f=e(c(n),c(t)),a=r(c(n),c(t)),u=[f,a]},i)}throw"Task::concat expected argument to be Task but saw "+t}},{key:"orElse",value:function(t){var e=this;if(w(t))return new n(function(n,r){return e.run(function(e){return t(e).run(n,r)},r)},this.cleanUp);throw"Task::orElse expected argument to be function but saw "+t}},{key:"run",set:function(n){this[Re]=n},get:function(){return this[Re]}},{key:"cleanUp",set:function(n){this[Ee]=n||Te},get:function(){return this[Ee]}}],[{key:"is",value:function(t){return n.prototype.isPrototypeOf(t)}},{key:"resolve",value:function(t){return n.of(t)}},{key:"reject",value:function(t){return new n(function(n){return n(t)})}},{key:"fromIdentity",value:function(t){return new n(function(n,e){return t.fold(e)})}},{key:"fromMaybe",value:function(t){return new n(function(n,e){t.fold(n,e)})}},{key:"fromEither",value:function(t){return new n(function(n,e){t.fold(n,e)})}},{key:"fromList",value:function(t){return new n(function(n,e){t.fold(function(n){return e(n[0])})})}},{key:"fromIO",value:function(t){return new n(function(n,e){var r=t.try();Error.prototype.isPrototypeOf(r)?n(r):e(r)})}},{key:"fromFunction",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),u=1;u<e;u++)r[u-1]=arguments[u];return r.length<t.length-1?function(){for(var e=arguments.length,u=Array(e),o=0;o<e;o++)u[o]=arguments[o];return n.fromFunction.apply(n,[t].concat(r,u))}:new n(function(n,e){try{t.apply(void 0,[e].concat(r))}catch(t){n(t)}})}},{key:"fromNodeCPS",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),u=1;u<e;u++)r[u-1]=arguments[u];return r.length<t.length-1?function(){for(var e=arguments.length,u=Array(e),o=0;o<e;o++)u[o]=arguments[o];return n.fromNodeCPS.apply(n,[t].concat(r,u))}:new n(function(n,e){t.apply(void 0,r.concat([function(t,r){t?n(t):e(r)}]))})}},{key:"fromPromise",value:function(t){return new n(function(n,e){t.then(e).catch(n)})}},{key:"toPromise",value:function(n,t){if(w(t))return t(function(t,e){n.run(e,t)});if(!c(Promise)&&w(Promise))return new Promise(function(t,e){n.run(e,t)});throw"Cannot create Promise from "+n}},{key:"race",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(n,t){return n.concat(t)},n.empty())}},{key:"all",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return new n(function(n,t){var r=[],u=e.length;e.forEach(function(e,o){e.run(n,function(n){r[o]=n,(u-=1)<1&&t(r)})})})}},{key:"of",value:function(t){return new n(function(n,e){return e(t)})}},{key:"empty",value:function(){return new n(function(){})}}]),n}(),_e=dn(function(n,t,e){return t.map(n).ap(e)}),Fe=dn(function(n,t,e,r){return t.map(n).ap(e).ap(r)}),Ue=dn(function(n,t,e,r,u){return t.map(n).ap(e).ap(r).ap(u)}),qe=dn(function(n,t,e,r,u,o){return t.map(n).ap(e).ap(r).ap(u).ap(o)}),ze={liftA2:_e,liftA3:Fe,liftA4:Ue,liftA5:qe,Identity:ve,Task:Le,State:Ie,Maybe:pe,Some:he,None:de,Either:ge,Left:Oe,Right:be,List:Me,IO:xe},Ve=dn(function(n,t){return n+t}),We=dn(function(n,t){return t-n}),Ce=dn(function(n,t){return n*t}),De=dn(function(n,t){return n?t/n:0}),Ge=dn(function(n,t){return n?t%n:0}),Be=dn(function(n,t){var e=tn(function(n,t){var e=n%t;return 0===e?t:$(Be,t,e)});return n&&t?e(n,t):0}),Je=dn(function(n,t){return n&&t?Math.abs(n*t)/Be(n,t):0}),He=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.reduce(function(n,t){if(v(t))return n+t;if(E(t)){var e=tn(function(n,t){return t.length<1?n:$(e,n+(v(t[0])?t[0]:0),t.slice(1))});return e(n,[].concat(Y(t)))}return n},0)},Ke=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.reduce(function(n,t){if(v(t))return n<1?t:n*t;if(E(t)){var e=tn(function(n,t){return t.length<1?n:$(e,n*(v(t[0])?t[0]:1),t.slice(1))});return e(n<1?1:n,[].concat(Y(t)))}return n},0)},Qe=tn,Xe=$,Ye=e,Ze=r,$e=u,nr=o,tr=i,er=Ve,rr=We,ur=Ce,or=De,ir=Ge,fr=Be,ar=Je,cr=He,lr=Ke,sr=f,vr=a,yr=l,pr=c,hr=s,dr=v,mr=y,wr=p,kr=h,gr=d,br=m,Or=w,Ar=k,Mr=S,Sr=x,xr=j,Pr=P,jr=g,Ir=b,Rr=O,Er=A,Nr=M,Tr=I,Lr=R,_r=E,Fr=N,Ur=T,qr=L,zr=_,Vr=F,Wr=U,Cr=q,Dr=z,Gr=V,Br=W,Jr=G,Hr=D,Kr=en,Qr=rn,Xr=un,Yr=fn,Zr=an,$r=cn,nu=ln,tu=on,eu=sn,ru=yn,uu=pn,ou=hn,iu=dn,fu=mn,au=wn,cu=kn,lu=bn,su=gn,vu=On,yu=le,pu=Xt,hu=Yt,du=Zt,mu=ee,wu=re,ku=ue,gu=te,bu=$t,Ou=ne,Au=ze.Identity,Mu=ze.IO,Su=ze.Maybe,xu=ze.None,Pu=ze.Some,ju=ze.Either,Iu=ze.Left,Ru=ze.Right,Eu=ze.List,Nu=ze.State,Tu=ze.Task,Lu=ze.liftA2,_u=ze.liftA3,Fu=ze.liftA4,Uu=ze.liftA5,qu=At,zu=jt,Vu=It,Wu=St,Cu=xt,Du=Pt,Gu=Sn,Bu=jn,Ju=Pn,Hu=xn,Ku=Rn,Qu=En,Xu=Tn,Yu=_n,Zu=qn,$u=Fn,no=zn,to=Un,eo=Vn,ro=Wn,uo=Cn,oo=Dn,io=Bn,fo=Jn,ao=Hn,co=Kn,lo=Gn,so=Qn,vo=Xn,yo=pt,po=dt,ho=mt,mo=In,wo=yt,ko=ht,go=Yn,bo=Zn,Oo=Nn,Ao=nt,Mo=tt,So=et,xo=Ln,Po=rt,jo=ut,Io=ot,Ro=it,Eo=ft,No=at,To=ct,Lo=lt,_o=st,Fo=vt,Uo=$n,qo=wt,zo=kt,Vo=Ht;return Object.freeze({trampoline:Qe,suspend:Xe,aritize:Ye,monadic:Ze,dyadic:$e,triadic:nr,tetradic:tr,add:er,subtract:rr,multiply:ur,divide:or,modulo:ir,gcd:fr,lcm:ar,sum:cr,product:lr,isNil:sr,isAny:vr,isNull:yr,isVoid:pr,isString:hr,isNumber:dr,isInt:mr,isFloat:wr,isBool:kr,isTrue:gr,isFalse:br,isFunc:Or,isObject:Ar,isMap:Mr,isSet:Sr,isWeakMap:xr,isWeakSet:Pr,isArray:jr,isDate:Ir,isRegex:Rr,isNode:Er,isNodeList:Nr,isPromise:Tr,isIterator:Lr,isIterable:_r,isGenerator:Fr,isArrayOf:Ur,isObjectOf:qr,isSetoid:zr,isFunctor:Vr,isApply:Wr,isPointed:Cr,isFoldable:Dr,isBifunctor:Gr,isSemigroup:Br,isMonad:Jr,isApplicative:Hr,id:Kr,getter:Qr,tap:Xr,pipe:Yr,compose:Zr,and:$r,or:nu,by:tu,fixed:eu,once:ru,not:uu,flip:ou,curry:iu,curryRight:fu,partial:au,partialRight:cu,given:lu,ifElse:su,memoize:vu,Type:yu,Additive:pu,Char:hu,Multiple:du,Min:mu,Max:wu,Dict:ku,Fn:gu,All:bu,Any:Ou,Identity:Au,IO:Mu,Maybe:Su,None:xu,Some:Pu,Either:ju,Left:Iu,Right:Ru,List:Eu,State:Nu,Task:Tu,liftA2:Lu,liftA3:_u,liftA4:Fu,liftA5:Uu,lens:qu,makeLenses:zu,mappedLens:Vu,view:Wu,over:Cu,set:Du,call:Gu,field:Bu,prop:Ju,has:Hu,merge:Ku,immutable:Qu,instance:Xu,first:Yu,last:Zu,head:$u,tail:no,initial:to,rest:eo,nth:ro,join:uo,split:oo,toUpper:io,toLower:fo,trim:ao,reverse:co,replace:lo,unique:so,union:vo,map:yo,flatten:po,flatMap:ho,assoc:mo,equals:wo,ap:ko,intersect:go,differ:bo,pairs:Oo,fold:Ao,foldRight:Mo,unfold:So,concat:xo,range:Po,filter:jo,keep:Io,drop:Ro,dropWhile:Eo,take:No,takeWhile:To,find:Lo,findRight:_o,foldMap:Fo,zip:Uo,traverse:qo,sequence:zo,transducers:Vo})});
