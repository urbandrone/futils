/* @banner futils | www.npmjs.com/package/futils */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.futils=t()}(this,function(){"use strict";var f=function(n,m){if("number"!=typeof n||isNaN(n)||!isFinite(n))throw"Aritiy of a function cannot be "+n;if("function"!=typeof m)throw m+" does not have an arity, only functions have";switch(Math.abs(n)){case 1:return function(n){return m(n)};case 2:return function(n,t){return m(n,t)};case 3:return function(n,t,r){return m(n,t,r)};case 4:return function(n,t,r,e){return m(n,t,r,e)};case 5:return function(n,t,r,e,u){return m(n,t,r,e,u)};case 6:return function(n,t,r,e,u,o){return m(n,t,r,e,u,o)};case 7:return function(n,t,r,e,u,o,i){return m(n,t,r,e,u,o,i)};case 8:return function(n,t,r,e,u,o,i,f){return m(n,t,r,e,u,o,i,f)};case 9:return function(n,t,r,e,u,o,i,f,c){return m(n,t,r,e,u,o,i,f,c)};case 10:return function(n,t,r,e,u,o,i,f,c,a){return m(n,t,r,e,u,o,i,f,c,a)};case 11:return function(n,t,r,e,u,o,i,f,c,a,s){return m(n,t,r,e,u,o,i,f,c,a,s)};case 12:return function(n,t,r,e,u,o,i,f,c,a,s,l){return m(n,t,r,e,u,o,i,f,c,a,s,l)};case 13:return function(n,t,r,e,u,o,i,f,c,a,s,l,p){return m(n,t,r,e,u,o,i,f,c,a,s,l,p)};case 14:return function(n,t,r,e,u,o,i,f,c,a,s,l,p,h){return m(n,t,r,e,u,o,i,f,c,a,s,l,p,h)};case 15:return function(n,t,r,e,u,o,i,f,c,a,s,l,p,h,v){return m(n,t,r,e,u,o,i,f,c,a,s,l,p,h,v)};case 16:return function(n,t,r,e,u,o,i,f,c,a,s,l,p,h,v,d){return m(n,t,r,e,u,o,i,f,c,a,s,l,p,h,v,d)};default:return m}},o=Symbol("@@type"),i=Symbol("@@values"),u=Symbol("@@type_tag"),c=function(n){return null==n},t=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=function(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n},s=function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,t){var r=[],e=!0,u=!1,o=void 0;try{for(var i,f=n[Symbol.iterator]();!(e=(i=f.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){u=!0,o=n}finally{try{!e&&f.return&&f.return()}finally{if(u)throw o}}return r}(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(n){if(Array.isArray(n)){for(var t=0,r=Array(n.length);t<n.length;t++)r[t]=n[t];return r}return Array.from(n)},p=function(n,t,r){return e=n,u=t,o=!1,i=r,Object.defineProperty(e,u,{enumerable:o,writable:!1,configurable:!1,value:i}),e;var e,u,o,i},h=function(t,n){if("function"==typeof n[t[o]])return n[t[o]].apply(t,t[i].map(function(n){return t[n]}));throw n[u]+"::caseOf - No pattern matched "+t[o]+" in "+Object.keys(n)},v=function(n,t,e,r){if(t.length===e.length){var u=Object.create(r);return u.__type__=u[o]=n,u.__values__=u[i]=t,t.reduce(function(n,t,r){return n[t]=e[r],n},u)}throw n+" awaits "+t.length+" arguments but got "+e.length},d=function(e,u,o){return u.length?f(u.length,function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return v(e,u,t,o)}):function(){return v(e,u,[],o)}},m=function(e){return function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.reduce(function(n,t){return t.derive(n)},e)}},n=function(t,n){var r=a({},o,t),e=d(t,n,r);return p(e,"name",t),p(e,"is",function(n){return n&&n[o]===t}),p(e,"deriving",m(e)),e.fn=e.prototype=r,e.prototype.constructor=e},e=function(t,r){var n,e=a({},o,t);return e.fn=e.prototype=(a(n={},u,t),a(n,"caseOf",function(n){return h(this,n)}),a(n,"cata",function(n){return h(this,n)}),n),p(e,"is",function(n){return!!n&&n[u]===t}),p(e,"deriving",m(e)),e.fn.constructor=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return function(n,t,r){if("function"==typeof n[t[o]])return n[t[o]].apply(n,l(r));throw n[u]+" - No constructor matched "+t[o]}(e,this,t)},p(e.fn.constructor,"name",t),Object.keys(r).forEach(function(t){var n=d(t,r[t],e.prototype);p(n,"name",t),p(n,"is",function(n){return!!n&&n[o]===t}),n.prototype.constructor.of=function(){return e.of?e.of.apply(e,arguments):n.apply(void 0,arguments)},e[t]=n}),e},y=Object.freeze({Type:n,UnionType:e}),g=function(n){return null===n?"Null":void 0===n?"Void":void 0!==n[o]?n[o]:"number"==typeof n&&isNaN(n)?"NaN":n.constructor.name};var b=function n(t){return void 0===t?n:function u(o,i){var n=g(o);if("Function"===n)return o.length<=1?o:f(o.length-i.length,function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=[].concat(l(i),t).filter(function(n){return void 0!==n});return e.length>=o.length?o.apply(void 0,l(e)):u(o,e)});throw"curry :: Expected argument to be of type function but saw "+n}(t,[])};var M={id:function(n){return n},constant:function(n){return function(){return n}},compose:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1<t.length)return f(t[t.length-1].length,t.reduceRight(function(n,t){return function(){return t(n.apply(void 0,arguments))}}));if(0<t.length)return t[0];throw"compose :: Expected to see one or more functions, but saw nothing"},pipe:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1<t.length)return f(t[0].length,t.reduce(function(n,t){return function(){return t(n.apply(void 0,arguments))}}));if(0<t.length)return t[0];throw"pipe :: Expected to see one or more functions, but saw nothing"},mcompose:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1<t.length)return f(t[t.length-1].length,t.reduceRight(function(n,t){return function(){return n.apply(void 0,arguments).flatMap(t)}}));if(0<t.length)return t[0];throw"mcompose :: Expected to see one or more functions, but saw nothing"},mpipe:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1<t.length)return f(t[0].length,t.reduce(function(n,t){return function(){return n.apply(void 0,arguments).flatMap(t)}}));if(0<t.length)return t[0];throw"mpipe :: Expected to see one or more functions, but saw nothing"},fixed:function(t){return(n=function(n){return t(function(){return n(n).apply(void 0,arguments)})})(n);var n},curry:b,curryRight:function n(t){return void 0===t?n:function u(o,i){var n=g(o);if("Function"===n)return o.length<=1?o:f(o.length-i.length,function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=[].concat(l(i),t).filter(function(n){return void 0!==n});return e.length>=o.length?o.apply(void 0,l(e.reverse())):u(o,e)});throw"curryRight :: Expected argument to be of type function but saw "+n}(t,[])},partial:function u(o){for(var n=arguments.length,t=Array(1<n?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i=t;return i.length<o.length&&(i=i.concat(new Array(Math.max(0,o.length-i.length)).fill(void 0))),function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=i.map(function(n){return void 0===n?t.shift():n});return 0<=e.lastIndexOf(void 0)?u.apply(void 0,[o].concat(l(e))):o.apply(void 0,l(e))}},partialRight:function u(o){for(var n=arguments.length,t=Array(1<n?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i=t;return i.length<o.length&&(i=i.concat(new Array(Math.max(0,o.length-i.length)).fill(void 0))),function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=i.map(function(n){return void 0===n?t.shift():n});return 0<=e.lastIndexOf(void 0)?u.apply(void 0,[o].concat(l(e))):o.apply(void 0,l(e.reverse()))}},memoize:function n(t){return void 0===t?n:function(e){var n=g(e);if("Function"===n){var u=Object.create(null);return f(e.length,function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return u[t]||(u[t]=e.apply(void 0,t)),u[t]})}throw"memoize :: Expected argument to be of type function but saw "+n}(t)},not:function n(t){return void 0===t?n:function(n){var t=g(n);if("Function"===t)return f(n.length,function(){return!n.apply(void 0,arguments)});throw"not :: Expected argument to be of type function but saw "+t}(t)},flip:function n(t){return void 0===t?n:function(o){var n=g(o);if("Function"===n)return o.length<2?o:o.length<3?function(n,t){return o(t,n)}:f(o.length,function(n,t){for(var r=arguments.length,e=Array(2<r?r-2:0),u=2;u<r;u++)e[u-2]=arguments[u];return o.apply(void 0,[t,n].concat(e))});throw"flip :: Expected argument to be of type function but saw "+n}(t)},upon:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:function(n,t){var r=g(n),e=g(t);if("Function"===r&&"Function"===e)return t(n);throw"upon :: Expected all arguments to be of type function but saw "+r+" & "+e}(r,n)},converge:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:function(e,u){var n=g(e),t=g(u),r="Array"===t&&u.every(function(n){return"Function"===g(n)});if("Function"===n&&r)return f(u.reduce(function(n,t){return Math.max(n,t.length)},0),function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return e.apply(void 0,l(u.map(function(n){return n.apply(void 0,t)})))});throw"converge :: Expected arguments to be of type function and array of functions but saw "+n+" & "+t}(r,n)}},O=function e(u,o){var n=g(u);if(n!==g(o))return!1;switch(n){case"NaN":return isNaN(u)&&isNaN(o);case"Date":return o.valueOf()===u.valueOf();case"RegExp":return o.toString()===u.toString();case"Array":return o.length===u.length&&u.every(function(n,t){return e(n,o[t])});case"Object":return Object.keys(u).every(function(n){return e(u[n],o[n])})&&Object.keys(o).every(function(n){return e(u[n],o[n])});case"Set":case"Map":return e([].concat(l(o.entries())),[].concat(l(u.entries())));case"Error":case"EvalError":case"TypeError":case"RangeError":case"SyntaxError":case"ReferenceError":return u.name===o.name&&u.message===o.message;default:return u&&void 0!==u[i]?u[i].reduce(function(n,r){return o[i].reduce(function(n,t){return!!n&&e(u[r],o[t])},n)},!0):u===o}},w=function(){function n(){t(this,n)}return r(n,null,[{key:"derive",value:function(n){if(n&&n.prototype&&!n.prototype.equals)return n.prototype.equals=function(n){return O(this,n)},n;throw"Cannot derive Eq from "+g(n)}}]),n}(),N=function(n){return"fantasy-land/"+n},R=function(i){return function(n){return Object.keys(i.fn).reduce(function(n,u){return n.prototype[N(u)]=function(){for(var n,t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];return(n=i.fn)[u].apply(n,[this].concat(r))},n},Object.keys(i.static).reduce(function(u,o){return u[N(o)]=function(){for(var n,t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];return(n=i.static)[o].apply(n,[u].concat(r))},u},n))}},x=function(o){return function(n,t){for(var r=arguments.length,e=Array(2<r?r-2:0),u=2;u<r;u++)e[u-2]=arguments[u];return o.apply(void 0,[n,t].concat(e))}},A=R({static:{of:function(n,t){return n.of(t)},empty:function(n){return n.empty()}},fn:{concat:function(n,t){return n.concat(t)}}}),S=R({static:{of:function(n,t){return n.of(t)}},fn:{concat:function(n,t){return n.concat(t)},map:function(n,t){return n.map(t)},ap:function(n,t){return t.ap(n)},chain:function(n,t){return n.flatMap(t)},extract:function(n){return n.extract()},extend:function(n,t){return n.extend(t)},reduce:function(n,t,r){return n.reduce(t,r)},traverse:function(n,t,r){return n.traverse(r,t)},sequence:function(n,t){return n.sequence(t)}}}),k=R({static:{of:function(n,t){return n.of(t)},empty:function(n){return n.empty()},zero:function(n){return n.zero()}},fn:{concat:function(n,t){return n.concat(t)},map:function(n,t){return n.map(t)},ap:function(n,t){return t.ap(n)},chain:function(n,t){return n.flatMap(t)},extract:function(n){return n.extract()},extend:function(n,t){return n.extend(t)},bimap:function(n,t,r){return n.biMap(t,r)},alt:function(n,t){return n.alt(t)},reduce:function(n,t,r){return n.reduce(t,r)},traverse:function(n,t,r){return n.traverse(r,t)},sequence:function(n,t){return n.sequence(t)}}}),E=R({static:{of:function(n,t){return n.of(t)},empty:function(n){return n.empty()},zero:function(n){return n.zero()}},fn:{concat:function(n,t){return n.concat(t)},map:function(n,t){return n.map(t)},ap:function(n,t){return t.ap(n)},chain:function(n,t){return n.flatMap(t)},extract:function(n){return n.extract()},extend:function(n,t){return n.extend(t)},bimap:function(n,t,r){return n.biMap(t,r)},alt:function(n,t){return n.alt(t)},reduce:function(n,t,r){return n.reduce(t,r)},traverse:function(n,t,r){return n.traverse(r,t)},sequence:function(n,t){return n.sequence(t)}}}),C=R({static:{of:function(n,t){return n.of(t)},empty:function(n){return n.empty()}},fn:{concat:function(n,t){return n.concat(t)},map:function(n,t){return n.map(t)},ap:function(n,t){return t.ap(n)},chain:function(n,t){return n.flatMap(t)},promap:function(n,t,r){return n.proMap(t,r)},contramap:function(n,t){return n.contraMap(t)}}}),j=R({static:{of:function(n,t){return n.of(t)},empty:function(n){return n.empty()},zero:function(n){return n.zero()}},fn:{concat:function(n,t){return n.concat(t)},map:function(n,t){return n.map(t)},ap:function(n,t){return t.ap(n)},chain:function(n,t){return n.flatMap(t)},extract:function(n){return n.extract()},extend:function(n,t){return n.extend(t)},bimap:function(n,t,r){return n.biMap(t,r)},alt:function(n,t){return n.alt(t)},reduce:function(n,t,r){return n.reduce(t,r)},traverse:function(n,t,r){return n.traverse(r,t)},sequence:function(n,t){return n.sequence(t)},filter:function(n,t){return n.filter(t)}}}),L=R({static:{of:function(n,t){return n.of(t)}},fn:{map:function(n,t){return n.map(t)},ap:function(n,t){return t.ap(n)},chain:function(n,t){return n.flatMap(t)}}}),q=R({static:{},fn:{map:function(n,t){return n.map(t)}}}),F=R({static:{of:function(n,t){return n.of(t)},empty:function(){return T.empty()}},fn:{concat:function(n,t){return n.concat(t)},map:function(n,t){return n.map(t)},ap:function(n,t){return t.ap(n)},chain:function(n,t){return n.flatMap(t)},bimap:function(n,t,r){return n.biMap(t,r)}}}),_=R({static:{of:function(n,t){return n.of(t)}},fn:{map:function(n,t){return n.map(t)},ap:function(n,t){return t.ap(n)},chain:function(n,t){return n.flatMap(t)}}}),z=x(function(n,t,r){return n&&n["fantasy-land/alt"]?n["fantasy-land/alt"](r):t.call(n,r)}),U=x(function(r,n,t){return r&&r["fantasy-land/ap"]&&void 0===r[o]?t["fantasy-land/ap"](r):"function"==typeof n?n.call(r,t):t.reduce(function(n,t){return n.concat(r.reduce(function(n,t){return t(n)},t))},[])}),I=x(function(n,t,r,e){return n&&n["fantasy-land/bimap"]?n["fantasy-land/bimap"](r,e):t.call(n,r,e)}),P=x(function(n,t,r){return n&&n["fantasy-land/concat"]?n["fantasy-land/concat"](r):t.call(n,r)}),B=x(function(n,t,r){return n&&n["fantasy-land/equals"]?n["fantasy-land/equals"](r):t.call(n,r)}),D=x(function(n,t,r){return n&&n["fantasy-land/filter"]?n["fantasy-land/filter"](r):t.call(n,r)}),W=x(function(n,t,r){return n&&n["fantasy-land/chain"]?n["fantasy-land/chain"](r):"function"==typeof t?t.call(n,r):n.reduce(function(n,t){return n.concat(r(t))},[])}),G=x(function(n,t,r){return n&&n["fantasy-land/reduce"]&&r["fantasy-land/empty"]?n["fantasy-land/reduce"](function(n,t){return n["fantasy-land/concat"](r["fantasy-land/of"](t))},r["fantasy-land/empty"]()):"function"==typeof t?t.call(n,r):n.reduce(function(n,t){return n.concat(r.of(t))},r.empty())}),K=x(function(n,t,r){return n&&n["fantasy-land/reduce"]?n["fantasy-land/reduce"](function(n,t){return null===n?r(t):(n["fantasy-land/concat"]||n.concat).call(n,r(t))},null):"function"==typeof t?t.call(n,r):n.reduce(function(n,t){return null===n?r(t):n.concat(r(t))},null)}),V=x(function(n,t,r){return n&&n["fantasy-land/map"]?n["fantasy-land/map"](r):"function"==typeof t?t.call(n,r):r(n)}),Y=x(function(n,t,r,e){return n&&n["fantasy-land/promap"]?n["fantasy-land/promap"](r,e):t.call(n,r,e)}),H=x(function(n,t,r,e){return n&&n["fantasy-land/reduce"]?n["fantasy-land/reduce"](r,e):"function"==typeof t?t.call(n,r,e):r(n,e)}),J=x(function(n,t,r){return n&&n["fantasy-land/sequence"]?n["fantasy-land/sequence"](r):"function"==typeof t?t.call(n,r):n.reduce(function(n,t){return n.concat(t)},r.of([]))}),Q=x(function(n,t,r,e){return n&&n["fantasy-land/traverse"]&&void 0===n[o]?n["fantasy-land/traverse"](e,r):"function"==typeof t?t.call(n,r,e):n.reduce(function(n,t){return r(t).map(function(t){return function(n){return n.concat(t)}}).ap(n)},e.of([]))}),X=function t(r,n){return arguments.length<1?t:arguments.length<2?function(n){return t(r,n)}:n&&"function"==typeof n.equals?B(n,n.equals,r):O(r,n)},Z=function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n?n:"Function"===g(n.then)?n.then(r,function(n){return n}):V(n,n.map,r)},$=function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n?n:n.nubBy?n.nubBy(r):n.reduce((e=r,function(n,t){return null!=n.find(function(n){return e(t,n)})?n:n.concat(t)}),[]);var e},nn=$(X),tn=function r(e,t,n){return void 0===e?r:void 0===t?function(n,t){return r(e,n,t)}:void 0===n?function(n){return r(e,t,n)}:function(r,e,u){var n=g(r),t=g(e),o=g(u);if("Function"===n){if("Array"===t&&o===t)return e.length>u.length?u.map(function(n,t){return r(e[t],n)}):e.map(function(n,t){return r(n,u[t])});throw"zipWith :: Expected second and third arguments to be arrays but saw "+t+" & "+o}throw"zipWith :: Expected first argument to be function but saw "+n}(e,t,n)},rn=tn(function(n,t){return[n,t]}),en={equals:X,concat:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:function(n,t){if(!c(t)){if("Function"===g(t.then))return Promise.race([n,t]);if("Function"===g(t.concat))return P(t,t.concat,n)}throw"concat :: Cannot append "+n+" to "+t}(r,n)},map:Z,ap:function t(r,e){return void 0===r?t:void 0===e?function(n){return t(r,n)}:null===e||null===r?null:"function"==typeof r.then?r.then(function(n){return e.then(n,function(n){return n})},function(n){return n}):U(r,r.ap,e)},flat:function(n){return c(n)?n:n.flat?n.flat():n.reduce(function(n,t){return n.concat(t)},[])},flatMap:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n?null:"function"==typeof n.then?n.then(r,function(n){return n}):W(n,n.flatMap,r)},filter:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:D(n,n.filter,r)},fold:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n?null:G(n,n.fold,r)},foldMap:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n?null:K(n,n.foldMap,r)},reduce:function r(e,t,n){return void 0===e?r:void 0===t?function(n,t){return r(e,n,t)}:void 0===n?function(n){return r(e,t,n)}:null===n?null:H(n,n.reduce,e,t)},reduceRight:function r(e,t,n){return void 0===e?r:void 0===t?function(n,t){return r(e,n,t)}:void 0===n?function(n){return r(e,t,n)}:null===n?null:n.reduceRight?n.reduceRight(e,t):e(t,n)},traverse:function r(e,t,n){return void 0===e?r:void 0===t?function(n,t){return r(e,n,t)}:void 0===n?function(n){return r(e,t,n)}:null===n?null:Q(n,n.traverse,e,t)},sequence:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n?null:J(n,n.sequence,r)},caseOf:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:n&&"Function"===g(n.caseOf)?n.caseOf(r):function(n,t){var r=g(n);if("Function"===g(t[r]))return t[r](n);if("Function"===g(t._))return t._(n);throw"caseOf :: No pattern matched "+r+" in "+Object.keys(n)}(n,r)},biMap:function r(e,t,n){return void 0===e?r:void 0===t?function(n,t){return r(e,n,t)}:void 0===n?function(n){return r(e,t,n)}:null===n?null:I(n,n.biMap,e,t)},proMap:function r(e,t,n){return void 0===e?r:void 0===t?function(n,t){return r(e,n,t)}:void 0===n?function(n){return r(e,t,n)}:null===n?n:"function"==typeof n?f(n.length,function(){return t(n(e.apply(void 0,arguments)))}):Y(n,n.proMap,e,t)},doM:function(n){var t=g(n);if("GeneratorFunction"===t){var o=n();return function n(t){var r=o.next(t),e=r.done,u=r.value;return e?u:"Function"===g(u.then)?u.then(n,function(n){return n}):u.flatMap(n)}()}throw"doM :: Expected argument to be a generator function but saw "+t},liftA:function u(o,e){for(var n=arguments.length,t=Array(2<n?n-2:0),r=2;r<n;r++)t[r-2]=arguments[r];return void 0===o?u:void 0===e?function(n){for(var t=arguments.length,r=Array(1<t?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return u.apply(void 0,[o,n].concat(r))}:t.length<1?function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return u.apply(void 0,[o,e].concat(t))}:t.reduce(function(n,t){return n.ap(t)},e.map(o))},head:function n(t){return void 0===t?n:null===t?null:"Cons"===t[o]||"Nil"===t[o]?t.head:"string"==typeof(r=t)||isNaN(r.length)?r:c(r[0])?null:r[0];var r},tail:function n(t){return void 0===t?n:null===t?[]:"Cons"===t[o]||"Nil"===t[o]?t.tail:"string"==typeof(r=t)||isNaN(r.length)?[r]:Array.from(r).slice(1);var r},take:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n?null:n.take?n.take(r):(e=r,"string"==typeof(u=n)||isNaN(u.length)?[u]:Array.from(u).slice(0,e));var e,u},drop:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:(e=r,c(u=n)?[]:u.drop?u.drop(e):"string"==typeof u||isNaN(u.length)?[u]:Array.from(u).slice(e));var e,u},find:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:Array.isArray(n)?(e=r,null==(u=n.find(e))?null:u):n.find(r);var e,u},nubBy:$,nub:nn,prop:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n?null:n.constructor===Map?(e=r,(u=n).has(e)?u.get(e):null):void 0===n[r]?null:n[r];var e,u},alt:function t(r,n){return void 0===r?t:void 0===n?function(n){return t(r,n)}:null===n||null===r?null:z(n,n.alt,r)},zipWith:tn,zip:rn},un=function(){function n(){t(this,n)}return r(n,null,[{key:"derive",value:function(n){if(n&&n.prototype&&n.prototype.equals)return n.prototype.lt=function(n){return function e(u,o){var n=g(u),t=g(o);if(n===t)switch(n){case"String":return u.localeCompare(o)<0;case"Number":case"Date":return u<o;case"Array":return u.length<o.length&&u.every(function(n,t){return e(n,o[t])});case"Object":return Object.keys(u).every(function(n){return e(u[n],o[n])});case"Set":case"Map":return e([].concat(l(u.entries())),[].concat(l(o.entries())));case"NaN":return!1;default:return!(!u||void 0===u[i])&&u[i].reduce(function(n,r){return o[i].reduce(function(n,t){return!!n&&e(u[r],o[t])},n)},!0)}throw"Cannot order value of type "+n+" with value of type "+t}(this,n)},n.prototype.lte=function(n){return this.lt(n)||this.equals(n)},n.prototype.gt=function(n){return!this.lte(n)},n.prototype.gte=function(n){return!this.lt(n)||this.equals(n)},n;throw"Cannot derive Ord from "+g(n)}}]),n}(),on=function u(t){var n=g(t);switch(g(t)){case"Boolean":case"String":case"Number":case"RegExp":case"Symbol":return t.toString();case"Date":return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();case"Array":return"["+t.map(u).join(", ")+"]";case"Object":return"{"+Object.keys(t).map(function(n){return n+": "+u(t[n])}).join(", ")+"}";case"Set":return"Set("+[].concat(l(t.entries())).map(function(n){var t=s(n,2),r=t[0],e=t[1];return r+": "+u(e)}).join(", ")+")";case"Map":return"Map("+[].concat(l(t.entries())).map(function(n){var t=s(n,2),r=t[0],e=t[1];return r+": "+u(e)}).join(", ")+")";default:return t&&t[i]?t[i].length<1?t[o]:t[o]+"("+t[i].map(function(n){return u(t[n])}).join(", ")+")":n}},fn=function(){function n(){t(this,n)}return r(n,null,[{key:"derive",value:function(n){if(n&&n.prototype)return n.prototype.toString=function(){return on(this)},n.prototype.inspect=function(){return this.toString()},Object.defineProperty(n.prototype,Symbol.toStringTag,{enumerable:!1,configurable:!1,writable:!1,value:function(){return this.toString()}}),n;throw"Cannot derive Show from "+g(n)}}]),n}(),cn={Show:fn,Eq:w,Ord:un},an=n("Sum",["value"]).deriving(fn,w,un);an.of=function(n){return"number"!=typeof n||isNaN(n)?an(0):an(n)},an.empty=function(){return an(0)},an.fn.concat=function(n){if(an.is(n))return an(this.value+n.value);throw"Sum::concat cannot append "+g(n)+" to "+g(this)};var sn=n("Product",["value"]).deriving(fn,w,un);sn.of=function(n){return"number"!=typeof n||isNaN(n)?sn(1):sn(n)},sn.empty=function(){return sn(1)},sn.fn.concat=function(n){if(sn.is(n))return sn(this.value*n.value);throw"Product::concat cannot append "+g(n)+" to "+g(this)};var ln=n("Min",["value"]).deriving(fn,w,un);ln.of=function(n){return"number"!=typeof n||isNaN(n)?ln(1/0):ln(n)},ln.empty=function(){return ln(1/0)},ln.fn.concat=function(n){if(ln.is(n))return this.lt(n)?this:n;throw"Min::concat cannot append "+g(n)+" to "+g(this)};var pn=n("Max",["value"]).deriving(fn,w,un);pn.of=function(n){return"number"!=typeof n||isNaN(n)?pn(-1/0):pn(n)},pn.empty=function(){return pn(-1/0)},pn.fn.concat=function(n){if(pn.is(n))return this.gt(n)?this:n;throw"Max::concat cannot append "+g(n)+" to "+g(this)};var hn=n("Char",["value"]).deriving(fn,w,un);hn.of=function(n){return hn("string"==typeof n?n:"")},hn.empty=function(){return hn("")},hn.fn.concat=function(n){if(hn.is(n))return hn(this.value.concat(n.value));throw"Char::concat cannot append "+g(n)+" to "+g(this)};var vn=n("Fn",["value"]).deriving(fn,w);vn.of=function(n){return vn("function"==typeof n?n:function(n){return n})},vn.empty=function(){return vn(function(n){return n})},vn.fn.concat=function(t){var r=this;if(vn.is(t))return vn(function(n){return t.value(r.value(n))});throw"Fn::concat cannot append "+g(t)+" to "+g(this)},vn.fn.run=function(n){return this.value(n)};var dn=n("Any",["value"]).deriving(fn,w,un);dn.of=function(n){return dn("boolean"==typeof n&&n)},dn.empty=function(){return dn(!1)},dn.fn.concat=function(n){if(dn.is(n))return this.value?this:dn(!!n.value);throw"Any::concat cannot append "+g(n)+" to "+g(this)};var mn=n("All",["value"]).deriving(fn,w,un);mn.of=function(n){return mn("boolean"!=typeof n||n)},mn.empty=function(){return mn(!0)},mn.fn.concat=function(n){if(mn.is(n))return this.value?mn(!!this.value&&!!n.value):this;throw"All::concat cannot append "+g(n)+" to "+g(this)};var yn=n("Record",["value"]).deriving(fn,w,un);yn.of=function(n){return"Object"===g(n)?yn(n):yn({})},yn.empty=function(){return yn({})},yn.fn.concat=function(n){if(yn.is(n))return yn(Object.assign({},this.value,n.value));throw"Record::concat cannot append "+g(n)+" to "+g(this)};var gn={Sum:A(an),Product:A(sn),Min:A(ln),Max:A(pn),Char:A(hn),Fn:A(vn),Any:A(dn),All:A(mn),Record:A(yn)},bn=n("Id",["value"]).deriving(fn,w,un);((bn.of=bn).from=bn).fromEither=function(n){return bn(n.value)},bn.fromMaybe=function(n){return bn(n.value)},bn.fromList=function(n){return n.caseOf({Nil:function(){return bn(void 0)},Cons:function(n){return bn(n)}})},bn.fn.concat=function(n){if(bn.is(n))return bn(this.value.concat(n.value));throw"Id::concat cannot append "+g(n)+" to "+g(this)},bn.fn.map=function(n){return bn(n(this.value))},bn.fn.flat=function(){return this.value},bn.fn.flatMap=function(n){return n(this.value)},bn.fn.extract=function(){return this.value},bn.fn.extend=function(n){return bn.of(n(this))},bn.fn.ap=function(n){return n.map(this.value)},bn.fn.reduce=function(n,t){return n(t,this.value)},bn.fn.traverse=function(n,t){return t.fn&&t.fn.ap?t.of(bn.of).ap(n(this.value)):n(this.value).map(bn.of)},bn.fn.sequence=function(n){return this.traverse(function(n){return n},n)};var Mn=e("Maybe",{Some:["value"],None:[]}).deriving(fn,w,un),On=Mn.Some,wn=Mn.None;Mn.fn.value=null,Mn.of=On,Mn.empty=wn,Mn.zero=wn,Mn.from=function(n){return null==n?wn():On(n)},Mn.fromEither=function(n){return n.isRight()?On(n.value):wn()},Mn.fromId=function(n){return Mn.from(n.value)},Mn.fromList=function(n){return n.caseOf({Nil:Mn.empty,Cons:function(n){return Mn.from(n)}})},Mn.fn.isSome=function(){return this.caseOf({None:function(){return!1},Some:function(){return!0}})},Mn.fn.concat=function(t){var n=this;if(Mn.is(t))return this.caseOf({None:function(){return n},Some:function(n){return t.isSome()?On(n.concat(t.value)):t}});throw"Maybe::concat cannot append "+g(t)+" to "+g(this)},Mn.fn.map=function(t){var n=this;return this.caseOf({None:function(){return n},Some:function(n){return Mn.from(t(n))}})},Mn.fn.flat=function(){var n=this;return this.caseOf({None:function(){return n},Some:function(n){return n}})},Mn.fn.flatMap=function(t){var n=this;return this.caseOf({None:function(){return n},Some:function(n){return t(n)}})},Mn.fn.extract=function(){return this.value},Mn.fn.extend=function(n){var t=this;return this.caseOf({None:function(){return t},Some:function(){return Mn.from(n(t))}})},Mn.fn.ap=function(t){var n=this;return this.caseOf({None:function(){return n},Some:function(n){return t.map(n)}})},Mn.fn.biMap=function(n,t){return this.caseOf({None:function(){return Mn.from(n(null))},Some:function(n){return Mn.from(t(n))}})},Mn.fn.reduce=function(t,r){return this.caseOf({None:function(){return r},Some:function(n){return t(r,n)}})},Mn.fn.traverse=function(t,n){var r=this;return this.caseOf({None:function(){return n.of(r)},Some:function(n){return t(n).map(Mn.from)}})},Mn.fn.sequence=function(n){return this.traverse(function(n){return n},n)},Mn.fn.alt=function(n){var t=this;return this.caseOf({None:function(){return n},Some:function(){return t}})},Mn.T=function(r){var e=n("MaybeT",["stack"]).deriving(fn);return e.None=function(){return e(r.of(Mn.None()))},e.Some=function(n){return e(r.of(Mn.Some(n)))},e.of=function(n){return e(r.of(Mn.of(n)))},e.from=function(n){return e(r.of(Mn.from(n)))},e.empty=function(){return e(r.of(Mn.empty()))},e.zero=function(){return e(r.of(Mn.zero()))},e.fn.concat=function(n){return e(this.stack.flatMap(function(t){return n.stack.map(function(n){return t.concat(n)})}))},e.fn.map=function(t){return e(this.stack.map(function(n){return n.map(t)}))},e.fn.ap=function(n){return e(this.stack.flatMap(function(t){return n.stack.map(function(n){return t.ap(n)})}))},e.fn.flat=function(){return e(this.stack.flatMap(function(n){return n.isSome()?n.extract().f:r.of(n)}))},e.fn.flatMap=function(t){return e(this.stack.flatMap(function(n){return n.isSome()?n.map(t).extract().f:r.of(n)}))},e.fn.biMap=function(t,r){return e(this.stack.map(function(n){return n.biMap(t,r)}))},e.fn.alt=function(n){return e(this.stack.flatMap(function(t){return n.stack.map(function(n){return t.alt(n)})}))},e.fn.caseOf=function(t){return this.stack.flatMap(function(n){return n.caseOf({None:function(n){return r.of(t.None())},Some:function(n){return r.of(t.Some(n))}})})},e};var Nn=e("Either",{Right:["value"],Left:["value"]}).deriving(fn,w,un),Rn=Nn.Right,xn=Nn.Left;Nn.of=Rn,Nn.empty=function(){return xn(null)},Nn.zero=function(){return xn(null)},Nn.from=function(n){return null==n?xn(null):n instanceof Error||Error.prototype.isPrototypeOf(n)?xn(n.message):Rn(n)},Nn.fromMaybe=function(n){return n.isSome()?Rn(n.value):xn(null)},Nn.fromId=function(n){return Nn.from(n.value)},Nn.fromList=function(n){return n.caseOf({Nil:function(){return Nn.from(null)},Cons:function(n){return Nn.from(n)}})},Nn.try=function(n){return function(){try{return Nn.from(n.run?n.run.apply(n,arguments):n.apply(void 0,arguments))}catch(n){return xn(n)}}},Nn.fn.isRight=function(){return this.caseOf({Left:function(){return!1},Right:function(){return!0}})},Nn.fn.concat=function(t){var n=this;if(Nn.is(t))return this.caseOf({Left:function(){return n},Right:function(n){return t.isRight()?Rn(n.concat(t.value)):t}});throw"Either::concat cannot append "+g(t)+" to "+g(this)},Nn.fn.map=function(t){var n=this;return this.caseOf({Left:function(){return n},Right:function(n){return Nn.from(t(n))}})},Nn.fn.flat=function(){var n=this;return this.caseOf({Left:function(){return n},Right:function(n){return n}})},Nn.fn.flatMap=function(t){var n=this;return this.caseOf({Left:function(){return n},Right:function(n){return t(n)}})},Nn.fn.extract=function(){return this.value},Nn.fn.extend=function(n){var t=this;return this.caseOf({Left:function(){return t},Right:function(){return Nn.from(n(t))}})},Nn.fn.ap=function(t){var n=this;return this.caseOf({Left:function(){return n},Right:function(n){return t.map(n)}})},Nn.fn.mapLeft=function(t){var n=this;return this.caseOf({Left:function(n){return xn(t(n))},Right:function(){return n}})},Nn.fn.biMap=function(t,r){return this.caseOf({Left:function(n){return Nn.from(t(n))},Right:function(n){return Nn.from(r(n))}})},Nn.fn.reduce=function(t,r){return this.caseOf({Left:function(){return r},Right:function(n){return t(r,n)}})},Nn.fn.traverse=function(t,n){var r=this;return this.caseOf({Left:function(){return n.of(r)},Right:function(n){return t(n).map(Nn.from)}})},Nn.fn.sequence=function(n){return this.traverse(function(n){return n},n)},Nn.fn.swap=function(){return this.caseOf({Left:Rn,Right:xn})},Nn.fn.alt=function(n){var t=this;return this.caseOf({Left:function(){return n},Right:function(){return t}})},Nn.T=function(r){var e=n("EitherT",["stack"]).deriving(fn);return e.Right=function(n){return e(r.of(Rn(n)))},e.Left=function(n){return e(r.of(xn(n)))},e.of=function(n){return e(r.of(Nn.of(n)))},e.from=function(n){return e(r.of(Nn.from(n)))},e.empty=function(){return e(r.of(Nn.empty()))},e.zero=function(){return e(r.of(Nn.zero()))},e.fn.concat=function(n){return e(this.stack.flatMap(function(t){return n.stack.map(function(n){return t.concat(n)})}))},e.fn.map=function(t){return e(this.stack.map(function(n){return n.map(t)}))},e.fn.ap=function(n){return e(this.stack.flatMap(function(t){return n.stack.map(function(n){return t.ap(n)})}))},e.fn.flat=function(){return e(this.stack.flatMap(function(n){return n.value.f}))},e.fn.flatMap=function(t){return e(this.stack.flatMap(function(n){return n.map(t).value.f}))},e.fn.biMap=function(t,r){return e(this.stack.map(function(n){return n.biMap(t,r)}))},e.fn.mapLeft=function(t){return e(this.stack.map(function(n){return n.mapLeft(t)}))},e.fn.alt=function(n){return e(this.stack.flatMap(function(t){return n.stack.map(function(n){return t.alt(n)})}))},e.fn.swap=function(){return e(this.stack.map(function(n){return n.swap()}))},e.fn.caseOf=function(t){return this.stack.flatMap(function(n){return n.caseOf({Left:function(n){return r.of(t.Left(n))},Right:function(n){return r.of(t.Right(n))}})})},e};var An=e("List",{Cons:["head","tail"],Nil:[]}),Sn=An.Cons,kn=An.Nil;An.fn.head=kn(),An.fn.tail=kn();var En=Symbol("BREAK"),Cn=function(n,t,r){for(var e=t,u=r;!kn.is(u);)e=n(e,u.head,u),u=u.tail;return e};An.of=function(n){return Sn(n,kn())},An.empty=kn,An.zero=kn,An.from=function(n){return null==n?kn():Array.isArray(n)?An.fromArray(n):Sn(n,kn())},An.fromArray=function(n){return n.reduceRight(function(n,t){return Sn(t,n)},kn())},An.fromId=function(n){return An.from(n.value)},An.fromMaybe=function(n){return n.isSome()?An.from(n.value):An.empty()},An.fromEither=function(n){return n.isRight()?An.from(n.value):An.empty()},An.fn[Symbol.iterator]=function(){var n=this;return this.caseOf({Nil:function(){return{done:!0,next:function(){}}},Cons:function(){return n.toArray()[Symbol.iterator]()}})},An.fn.toString=function(){var n=this;return this.caseOf({Nil:function(){return"Nil"},Cons:function(){return n.reduceRight(function(n,t){return"Cons("+on(t)+", "+n+")"},"Nil")}})},An.fn.toArray=function(){return this.reduce(function(n,t){return n.concat(t)},[])},An.fn.concat=function(n){var t=this;if(An.is(n))return this.caseOf({Nil:function(){return t},Cons:function(){return kn.is(n)?n:t.reduceRight(function(n,t){return Sn(t,n)},n)}});throw"List::concat cannot append "+g(n)+" to "+g(this)},An.fn.map=function(r){return this.reduceRight(function(n,t){return Sn(r(t),n)},kn())},An.fn.flat=function(){return this.reduceRight(function(n,t){return t.reduceRight(function(n,t){return Sn(t,n)},n)},kn())},An.fn.flatMap=function(r){return this.reduceRight(function(n,t){return r(t).reduceRight(function(n,t){return Sn(t,n)},n)},kn())},An.fn.extract=function(){return this.head},An.fn.extend=function(e){var n=this;return this.caseOf({Nil:function(){return n},Cons:function(){return n.reduceRight(function(n,t,r){return Sn(e(r),n)},kn())}})},An.fn.ap=function(n){var t=this;return n.reduceRight(function(n,r){return t.reduceRight(function(n,t){return Sn(t(r),n)},n)},kn())},An.fn.biMap=function(n,t){var r=this;return this.caseOf({Nil:function(){return An.from(n(r.head))},Cons:function(){return r.map(t)}})},An.fn.reduce=function(n,t){var r=this;return this.caseOf({Nil:function(){return t},Cons:function(){return Cn(n,t,r)}})},An.fn.reduceRight=function(t,r){var e=this;return this.caseOf({Nil:function(){return r},Cons:function(){return n=e,Cn(t,r,Cn(function(n,t){return Sn(t,n)},kn(),n));var n}})},An.fn.traverse=function(e,n){var t=this;return this.caseOf({Nil:function(){return n.of(t)},Cons:function(){return t.reduceRight(function(n,r){return n.flatMap(function(t){return e(r).map(function(n){return Sn(n,t)})})},n.of(kn()))}})},An.fn.sequence=function(n){return this.traverse(function(n){return n},n)},An.fn.alt=function(n){var t=this;return this.caseOf({Nil:function(){return n},Cons:function(){return t}})},An.fn.foldMap=function(r){return this.reduceRight(function(n,t){return null==n?r(t):n.concat(r(t))},null)},An.fn.fold=function(n){return this.foldMap(n.of)},An.fn.filter=function(r){return this.reduceRight(function(n,t){return r(t)?Sn(t,n):n},kn())},An.fn.intersperse=function(r){return this.reduceRight(function(n,t){return kn.is(n)?Sn(t,n):Sn(t,Sn(r,n))},kn())},An.fn.cons=function(n){return Sn(n,this)},An.fn.snoc=function(n){return this.reduceRight(function(n,t){return Sn(t,n)},Sn(n,kn()))},An.fn.take=function(r){var n=this;return this.caseOf({Nil:function(){return n},Cons:function(n,t){return 0<r?Sn(n,t.take(r-1)):kn()}})},An.fn.drop=function(r){var n=this;return this.caseOf({Nil:function(){return n},Cons:function(n,t){return 1<r?t.drop(r-1):t}})},An.fn.find=function(r){var n=this;return this.caseOf({Nil:function(){return null},Cons:function(){return function(n,t,r){for(var e=t,u=r;!kn.is(u);){var o=n(e,u.head,u),i=s(o,2),f=i[0];if(e=i[1],f===En)break;u=u.tail}return e}(function(n,t){return r(t)?[En,t]:[null,n]},null,n)}})},An.fn.nubBy=function(r){return this.reduce(function(n,t){return null!=n.find(function(n){return r(t,n)})?n:n.snoc(t)},kn())},An.fn.nub=function(){return this.nubBy(O)};var jn=n("IO",["run"]);jn.of=function(n){return jn(function(){return n})},jn.empty=function(){return jn(function(n){return n})},jn.from=function(n){return"function"==typeof n?jn(n):jn.of(n)},jn.fromEither=function(n){return jn.of(n.value)},jn.fromMaybe=function(n){return jn.of(n.value)},jn.fromList=function(n){return jn.of(n.head)},jn.fromId=function(n){return jn.of(n.value)},jn.fn.concat=function(t){var r=this;if(jn.is(t))return jn(function(n){return t.run(r.run(n))});throw"IO::concat cannot append "+g(t)+" to "+g(this)},jn.fn.map=function(t){var r=this;return jn(function(n){return t(r.run(n))})},jn.fn.flat=function(){var t=this;return jn(function(n){return t.run(n).run(n)})},jn.fn.flatMap=function(t){var r=this;return jn(function(n){return t(r.run(n)).run(n)})},jn.fn.ap=function(n){var t=this;return n.map(function(n){return t.run(n)})},jn.fn.contraMap=function(t){var r=this;return jn(function(n){return r.run(t(n))})},jn.fn.proMap=function(t,r){var e=this;return jn(function(n){return r(e.run(t(n)))})};var Ln=n("Pair",["_1","_2"]).deriving(fn);Ln.from=function(t,n){return void 0===n?function(n){return Ln.from(t,n)}:Ln(t,n)},Ln.fromRight=function(t,n){return void 0===n?function(n){return Ln.fromRight(t,n)}:Ln(n,t)},Ln.fn.concat=function(n){if(Ln.is(n))return Ln(this._1.concat(n._1),this._2.concat(n._2));throw"Pair::concat cannot append "+g(n)+" to "+g(this)},Ln.fn.map=function(n){return Ln(this._1,n(this._2))},Ln.fn.extend=function(n){return Ln(this._1,n(this))},Ln.fn.fst=function(){return this._1},Ln.fn.snd=function(){return this._2};var qn=n("State",["compute"]);qn.of=function(t){return qn(function(n){return Ln(t,n)})},qn.get=function(){return qn(function(n){return Ln(n,n)})},qn.put=function(n){return qn(function(){return Ln(null,n)})},qn.modify=function(t){return qn.get().flatMap(function(n){return qn.put(t(n))})},qn.fn.map=function(u){var o=this;return qn(function(n){var t=o.compute(n),r=t._1,e=t._2;return Ln(u(r),e)})},qn.fn.flat=function(){var u=this;return qn(function(n){var t=u.compute(n),r=t._1,e=t._2;return r.compute(e)})},qn.fn.flatMap=function(u){var o=this;return qn(function(n){var t=o.compute(n),r=t._1,e=t._2;return u(r).compute(e)})},qn.fn.ap=function(n){return this.flatMap(n.map.bind(n))},qn.fn.run=function(n){return this.compute(n).fst()},qn.fn.exec=function(n){return this.compute(n).snd()};var Fn=function(n){return"undefined"!=typeof setImmediate?setImmediate(n):"undefined"!=typeof process?process.nextTick(n):setTimeout(n,0)},_n=n("Task",["run"]).deriving(fn,w);_n.fn.cleanUp=function(){},_n.of=function(r){return _n(function(n,t){t(r)})},_n.empty=function(){return _n(function(){})},_n.resolve=_n.of,_n.reject=function(t){return _n(function(n){n(t)})},_n.timeout=function(r,e){var u=void 0,n=_n(function(n,t){u=setTimeout(function(){t(e())},r)});return n.cleanUp=function(){u&&clearTimeout(u)},n},_n.fromPromiseFunction=function(e){return function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return _n(function(n,t){e.apply(void 0,r).then(t).catch(n)})}},_n.fromNodeFunction=function(u){return function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return _n(function(r,e){u.apply(void 0,t.concat([function(n,t){n?r(n):e(t)}]))})}},_n.fromId=function(n){return _n.of(n.value)},_n.fromMaybe=function(r){return _n(function(n,t){r.isSome()?t(r.value):n(null)})},_n.fromEither=function(r){return _n(function(n,t){r.cata({Left:n,Right:t})})},_n.fromList=function(n){return n.caseOf({Nil:function(){return _n.reject(n)},Cons:function(n){return _n.resolve(n)}})},_n.fromIO=function(r){return _n(function(t,n){try{n(r.run())}catch(n){t(n)}})},_n.fn.toPromise=function(){var r=this;return new Promise(function(n,t){r.run(t,n)})},_n.fn.concat=function(o){var i=this;if(_n.is(o)){var f=function(n,t){i.cleanUp(n),o.cleanUp(t)},n=_n(function(n,t){var r=!1,e=[],u=function(t){return function(n){r||(r=!0,Fn(function(){return f(e[0],e[1])}),t(n))}};return e[0]=i.run(u(n),u(t)),e[1]=o.run(u(n),u(t)),e});return n.cleanUp=f,n}throw"Task::concat cannot append "+g(o)+" to "+g(this)},_n.fn.map=function(r){var e=this,n=_n(function(n,t){e.run(n,function(n){return t(r(n))})});return n.cleanUp=this.cleanUp,n},_n.fn.flat=function(){var n=this,t=_n(function(t,r){n.run(t,function(n){return n.run(t,r)})});return t.cleanUp=this.cleanUp,t},_n.fn.flatMap=function(e){var n=this,t=_n(function(t,r){n.run(t,function(n){return e(n).run(t,r)})});return t.cleanUp=this.cleanUp,t},_n.fn.ap=function(s){var l=this,p=function(n,t){l.cleanUp(n),s.cleanUp(t)},n=_n(function(t,r){var e=!1,u=!1,o=!1,i=!1,f=!1,c=[],n=function(n){f||(f=!0,t(n))},a=function(t){return function(n){if(!f)return t(n),u&&i?(Fn(function(){return p(c[0],c[1])}),r(e(o))):n}};return c[0]=l.run(n,a(function(n){u=!0,e=n})),c[1]=s.run(n,a(function(n){i=!0,o=n})),c});return n.cleanUp=p,n},_n.fn.swap=function(){var r=this,n=_n(function(n,t){r.run(t,n)});return n.cleanUp=this.cleanUp,n},_n.fn.alt=function(r){var e=this,n=_n(function(n,t){e.run(function(){return r.run(n,t)},t)});return n.cleanUp=this.cleanUp,n},_n.fn.biMap=function(e,u){var n=this,t=_n(function(t,r){n.run(function(n){return t(e(n))},function(n){return r(u(n))})});return t.cleanUp=this.cleanUp,t};var zn=e("Free",{Cont:["value","run"],Return:["value"]}),Un=zn.Cont,Tn=zn.Return;zn.of=Tn,zn.liftM=function(n){return Un(n,Tn)},zn.from=function(n){return f(n.length,function(){return zn.liftM(n.apply(void 0,arguments))})},zn.fn.map=function(r){return this.caseOf({Return:function(n){return Tn(r(n))},Cont:function(n,t){return Un(n,function(n){return t(n).map(r)})}})},zn.fn.flatMap=function(r){return this.caseOf({Return:function(n){return r(n)},Cont:function(n,t){return Un(n,function(n){return t(n).flatMap(r)})}})},zn.fn.ap=function(r){return this.caseOf({Return:function(n){return r.map(n)},Cont:function(n,t){return Un(n,function(n){return t(n).ap(r)})}})},zn.fn.interpret=function(r,e){return this.caseOf({Return:function(n){return e.of(n)},Cont:function(n,t){return null==n?t().interpret(r,e):r(n).flatMap(function(n){return t(n).interpret(r,e)})}})},zn.fn.traverse=zn.fn.interpret;var In={Id:S(bn),Maybe:k(Mn),Either:E(Nn),List:j(An),IO:C(jn),State:L(qn),Task:F(_n),Free:_(zn),Pair:q(Ln)},Pn=b(function(n,t,r,e,u){return Z(function(n){return t(r,n,u)},e(n(r,u)))}),Bn=Pn(function(n,t){var r=t[n];return null==r?null:r},function(n,t,r){var e=Array.isArray(r)?[].concat(l(r)):Object.assign({},r);return e[n]=t,e}),Dn=function t(r){return{value:r,map:function(n){return t(n(r))}}},Wn=b(function(t,n){return Dn(Z(function(n){return t(n).value},n))}),Gn=function(n){return{value:n,map:function(){return this}}},Kn={createLens:Pn,lenses:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.reduce(function(n,t){return n[t]=Bn(t),n},{index:Bn})},mapped:Wn,view:b(function(n,t){return n(Gn)(t).value}),over:b(function(n,t,r){return n(function(n){return Dn(t(n))})(r).value}),set:b(function(n,t,r){return n(function(){return Dn(t)})(r).value})},Vn=Symbol("isRecur"),Yn=y,Hn=M,Jn=en,Qn=cn,Xn=gn,Zn=In,$n=Kn,nt={again:function(n){for(var t=arguments.length,r=Array(1<t?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];var u=function(){return n.apply(void 0,r)};return Object.defineProperty(u,Vn,{enumerable:!1,writable:!1,value:!0}),u},recur:function(t){return f(t.length,function(){for(var n=t.apply(void 0,arguments);"Function"===g(n)&&n[Vn];)n=n();return n})}};return Object.freeze({adt:Yn,lambda:Hn,operation:Jn,generics:Qn,monoid:Xn,data:Zn,optic:$n,trampoline:nt})});
