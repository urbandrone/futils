/* @banner futils | www.npmjs.com/package/futils */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.futils=t()}(this,function(){"use strict";var i=function(n,m){if("number"!=typeof n||isNaN(n)||!isFinite(n))throw"Aritiy of a function cannot be "+n;if("function"!=typeof m)throw m+" does not have some arity, only functions have";switch(Math.abs(n)){case 1:return function(n){return m(n)};case 2:return function(n,t){return m(n,t)};case 3:return function(n,t,r){return m(n,t,r)};case 4:return function(n,t,r,e){return m(n,t,r,e)};case 5:return function(n,t,r,e,u){return m(n,t,r,e,u)};case 6:return function(n,t,r,e,u,o){return m(n,t,r,e,u,o)};case 7:return function(n,t,r,e,u,o,i){return m(n,t,r,e,u,o,i)};case 8:return function(n,t,r,e,u,o,i,f){return m(n,t,r,e,u,o,i,f)};case 9:return function(n,t,r,e,u,o,i,f,c){return m(n,t,r,e,u,o,i,f,c)};case 10:return function(n,t,r,e,u,o,i,f,c,a){return m(n,t,r,e,u,o,i,f,c,a)};case 11:return function(n,t,r,e,u,o,i,f,c,a,l){return m(n,t,r,e,u,o,i,f,c,a,l)};case 12:return function(n,t,r,e,u,o,i,f,c,a,l,s){return m(n,t,r,e,u,o,i,f,c,a,l,s)};case 13:return function(n,t,r,e,u,o,i,f,c,a,l,s,h){return m(n,t,r,e,u,o,i,f,c,a,l,s,h)};case 14:return function(n,t,r,e,u,o,i,f,c,a,l,s,h,p){return m(n,t,r,e,u,o,i,f,c,a,l,s,h,p)};case 15:return function(n,t,r,e,u,o,i,f,c,a,l,s,h,p,v){return m(n,t,r,e,u,o,i,f,c,a,l,s,h,p,v)};case 16:return function(n,t,r,e,u,o,i,f,c,a,l,s,h,p,v,y){return m(n,t,r,e,u,o,i,f,c,a,l,s,h,p,v,y)};default:return m}},t=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n},c=function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,t){var r=[],e=!0,u=!1,o=void 0;try{for(var i,f=n[Symbol.iterator]();!(e=(i=f.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){u=!0,o=n}finally{try{!e&&f.return&&f.return()}finally{if(u)throw o}}return r}(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=function(n){if(Array.isArray(n)){for(var t=0,r=Array(n.length);t<n.length;t++)r[t]=n[t];return r}return Array.from(n)},o=Symbol("@@type"),a=Symbol("@@values"),l=Symbol("@@type_tag"),s=function(n,t,r){return Object.defineProperty(n,t,{enumerable:!1,writable:!1,configurable:!1,value:r})},h=function(t,n){if("function"==typeof n[t[o]])return n[t[o]].apply(t,t[a].map(function(n){return t[n]}));throw n[l]+"::caseOf - No pattern matched "+t[o]+" in "+Object.keys(n)},p=function(n,t,e,r){if(t.length===e.length){var u=Object.create(r);return u.__type__=u[o]=n,u.__values__=u[a]=t,t.reduce(function(n,t,r){return n[t]=e[r],n},u)}throw n+" awaits "+t.length+" arguments but got "+e.length},v=function(e,u,o){switch(u.length){case 0:return function(){return p(e,u,[],o)};default:return i(u.length,function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return p(e,u,t,o)})}},y=function(e){return function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.reduce(function(n,t){return t.mixInto(n)},e)}},n=function(t,n){var r={},e=v(t,n,r);return s(e,"is",function(n){return n&&n[o]===t}),s(e,"deriving",y(e)),e.fn=e.prototype=r,e.prototype.constructor=e},e=function(t,r){var n,e=u({},o,t);return e.fn=e.prototype=(u(n={},l,t),u(n,"caseOf",function(n){return h(this,n)}),u(n,"cata",function(n){return h(this,n)}),n),s(e,"is",function(n){return null!=n&&n[l]===t}),s(e,"deriving",y(e)),Object.keys(r).forEach(function(t){var n=v(t,r[t],e.prototype);s(n,"is",function(n){return null!=n&&n[o]===t}),e[t]=n}),e},m=Object.freeze({Type:n,UnionType:e});var d=function(n){return n.length<=1?n:function e(u,o){return o.length>=u.length?u.apply(void 0,f(o)):i(u.length-o.length,function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return e(u,o.concat(t))})}(n,[])};var g={id:function(n){return n},constant:function(n){return function(){return n}},compose:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return i(t[t.length-1].length,t.reduceRight(function(n,t){return function(){return t(n.apply(void 0,arguments))}}))},pipe:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return i(t[t.length-1].length,t.reduce(function(n,t){return function(){return t(n.apply(void 0,arguments))}}))},fixed:function(t){return(n=function(n){return t(function(){return n(n).apply(void 0,arguments)})})(n);var n},curry:d,curryRight:function(n){return n.length<=1?n:function e(u,o){return o.length>=u.length?u.apply(void 0,f(o.reverse())):i(u.length-o.length,function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return e(u,o.concat(t))})}(n,[])},partial:function u(o){for(var n=arguments.length,t=Array(1<n?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i=t;return i.length<o.length&&(i=i.concat(new Array(Math.max(0,o.length-i.length)).fill(void 0))),function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=i.map(function(n){return void 0===n?t.shift():n});return 0<=e.lastIndexOf(void 0)?u.apply(void 0,[o].concat(f(e))):o.apply(void 0,f(e))}},partialRight:function u(o){for(var n=arguments.length,t=Array(1<n?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i=t;return i.length<o.length&&(i=i.concat(new Array(Math.max(0,o.length-i.length)).fill(void 0))),function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=i.map(function(n){return void 0===n?t.shift():n});return 0<=e.lastIndexOf(void 0)?u.apply(void 0,[o].concat(f(e))):o.apply(void 0,f(e.reverse()))}},memoize:function(u){var o=Object.create(null);return i(u.length,function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=JSON.stringify(t);return void 0===o[e]&&(o[e]=u.apply(void 0,t)),o[e]})},not:function(n){return i(n.length,function(){return!n.apply(void 0,arguments)})},flip:function(o){return o.length<2?o:o.length<3?function(n,t){return o(t,n)}:i(o.length,function(n,t){for(var r=arguments.length,e=Array(2<r?r-2:0),u=2;u<r;u++)e[u-2]=arguments[u];return o.apply(void 0,[t,n].concat(e))})}},A=function(n){return null===n?"Null":void 0===n?"Void":void 0!==n.__type__?n.__type__:n.constructor.name},b=function r(t,e){var n=A(t);if(n!==A(e))return!1;switch(n){case"Null":case"Void":case"Boolean":case"String":case"Number":case"Function":case"GeneratorFunction":case"Promise":case"Proxy":case"Symbol":case"IO":case"Task":case"State":case"State.Value":case"DataBuffer":case"ArrayBuffer":case"SharedArrayBuffer":case"UInt8Array":case"UInt8ClampedArray":case"UInt16Array":case"UInt64Array":case"Float32Array":case"Float64Array":case"TypedArray":return t===e;case"Date":return e.valueOf()===t.valueOf();case"RegExp":return e.toString()===t.toString();case"Array":return e.length===t.length&&t.every(function(n,t){return r(n,e[t])});case"Object":return Object.keys(t).every(function(n){return r(t[n],e[n])})&&Object.keys(e).every(function(n){return r(t[n],e[n])});case"Set":case"Map":return r([].concat(f(e.entries())),[].concat(f(t.entries())));case"Error":case"EvalError":case"TypeError":case"RangeError":case"SyntaxError":case"ReferenceError":return t.name===e.name&&t.message===e.message;default:return r(t.value,e.value)}},S=function(){function n(){t(this,n)}return r(n,null,[{key:"mixInto",value:function(n){if(n&&n.prototype)return n.prototype.equals=function(n){return b(this,n)},n;throw"Cannot derive Eq from "+A(n)}}]),n}(),O=function t(r,n){return null==n?function(n){return t(r,n)}:n.map(r)},R={equals:function t(r,n){return null==n?function(n){return t(r,n)}:"function"==typeof n.equals?n.equals(r):b(r,n)},concat:function t(r,n){return null==n?function(n){return t(r,n)}:n.concat(r)},map:O,ap:function t(r,n){return null==n?function(n){return t(r,n)}:r.ap(n)},flat:function(n){return null==n?n:n.flat?n.flat():n.reduce(function(n,t){return n.concat(t)},[])},flatMap:function t(r,n){return null==n?function(n){return t(r,n)}:n.flatMap?n.flatMap(r):n.reduce(function(n,t){return n.concat(r(t))},[])},filter:function t(r,n){return null==n?function(n){return t(r,n)}:n.filter(r)},fold:function t(r,n){return null==n?function(n){return t(r,n)}:n.fold?n.fold(r):n.reduce(function(n,t){return n.concat(r.of(t))},r.empty())},foldMap:function t(r,n){return null==n?function(n){return t(r,n)}:n.foldMap?n.foldMap(r):n.reduce(function(n,t){return null==n?r(t):n.concat(r(t))},null)},reduce:function r(e,t,n){return null==t?function(n,t){return r(e,n,t)}:null==n?function(n){return r(e,t,n)}:n.reduce(e,t)},reduceRight:function r(e,t,n){return null==t?function(n,t){return r(e,n,t)}:null==n?function(n){return r(e,t,n)}:n.reduceRight(e,t)},traverse:function r(e,t,n){return null==t?function(n,t){return r(e,n,t)}:null==n?function(n){return r(e,t,n)}:n.traverse?n.traverse(e,t):n.reduce(function(n,t){return n.concat(e(t))},t.of([]))},sequence:function t(r,n){return null==n?function(n){return t(r,n)}:n.sequence?n.sequence(r):n.reduce(function(n,t){return n.concat(t)},r.of([]))},doM:function(n){var e=n();return function n(t){var r=e.next(t);return r.done?r.value:r.value.flatMap(n)}()},liftA:function u(o,e){for(var n=arguments.length,t=Array(2<n?n-2:0),r=2;r<n;r++)t[r-2]=arguments[r];return null==e?function(n){for(var t=arguments.length,r=Array(1<t?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return u.apply(void 0,[o,n].concat(r))}:t.length<1?function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return u.apply(void 0,[o,e].concat(t))}:t.reduce(function(n,t){return n.ap(t)},e.map(o))},head:function(n){return null==n?null:n.head?n.head():"string"==typeof(t=n)||isNaN(t.length)?t:null==t[0]?null:t[0];var t},tail:function(n){return null==n?[]:n.tail?n.tail():"string"==typeof(t=n)||isNaN(t.length)?[t]:Array.from(t).slice(1);var t},take:function t(r,n){return null==n?function(n){return t(r,n)}:n.take?n.take(r):(e=r,"string"==typeof(u=n)||isNaN(u.length)?[u]:Array.from(u).slice(0,e));var e,u},drop:function t(r,n){return null==n?function(n){return t(r,n)}:n.drop?n.drop(r):(e=r,"string"==typeof(u=n)||isNaN(u.length)?[u]:Array.from(u).slice(0,e));var e,u},find:function t(r,n){return null==n?function(n){return t(r,n)}:Array.isArray(n)?(e=r,null==(u=n.find(e))?null:u):n.find(r);var e,u},findRight:function t(r,n){return null==n?function(n){return t(r,n)}:Array.isArray(n)?function(n,t){for(var r=null,e=t.length-1;0<=e;){if(n(t[e])){r=t[e];break}e-=1}return r}(r,n):n.findRight(r)}},N=function(){function n(){t(this,n)}return r(n,null,[{key:"mixInto",value:function(n){if(n&&n.prototype&&n.prototype.equals)return n.prototype.lt=function(n){return function r(t,e){var n=A(t),u=A(e);if(n===u)switch(n){case"String":return t.localeCompare(e)<0;case"Number":case"Date":return t<e;case"Array":return t.length<e.length&&t.every(function(n,t){return r(n,e[t])});case"Object":return Object.keys(t).every(function(n){return r(t[n],e[n])});case"Set":case"Map":return r([].concat(f(t.entries())),[].concat(f(e.entries())));case"Null":case"Void":case"Boolean":case"RegExp":case"Error":case"EvalError":case"TypeError":case"RangeError":case"SyntaxError":case"ReferenceError":case"Function":case"GeneratorFunction":case"Promise":case"Proxy":case"Symbol":case"IO":case"Task":case"State":case"State.Value":case"DataBuffer":case"ArrayBuffer":case"SharedArrayBuffer":case"UInt8Array":case"UInt8ClampedArray":case"UInt16Array":case"UInt64Array":case"Float32Array":case"Float64Array":case"TypedArray":return!1;default:return r(t.value,e.value)}throw"Cannot order value of type "+n+" with value of type "+u}(this,n)},n.prototype.lte=function(n){return this.lt(n)||this.equals(n)},n.prototype.gt=function(n){return!this.lte(n)},n.prototype.gte=function(n){return!this.lt(n)||this.equals(n)},n;throw"Cannot derive Ord from "+A(n)}}]),n}(),M=function u(t){if(null===t)return"Null";if(void 0===t)return"Void";if(null!=t.__type__)return t.__values__.length<1?t.__type__:t.__type__+"("+t.__values__.map(function(n){return u(t[n])}).join(", ")+")";switch(t.constructor.name){case"Boolean":case"String":case"Number":case"RegExp":case"Symbol":return t.toString();case"Function":case"GeneratorFunction":case"Promise":case"Proxy":case"DataBuffer":case"ArrayBuffer":case"SharedArrayBuffer":case"UInt8Array":case"UInt8ClampedArray":case"UInt16Array":case"UInt64Array":case"Float32Array":case"Float64Array":case"TypedArray":case"Error":case"EvalError":case"TypeError":case"RangeError":case"SyntaxError":case"ReferenceError":return t.constructor.name;case"Date":return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();case"Array":return"["+t.map(u).join(", ")+"]";case"Object":return"{"+Object.keys(t).map(function(n){return n+": "+u(t[n])}).join(", ")+"}";case"Set":return"Set("+[].concat(f(t.entries())).map(function(n){var t=c(n,2),r=t[0],e=t[1];return r+": "+u(e)}).join(", ")+")";case"Map":return"Map("+[].concat(f(t.entries())).map(function(n){var t=c(n,2),r=t[0],e=t[1];return r+": "+u(e)}).join(", ")+")";default:return""+t}},w=function(){function n(){t(this,n)}return r(n,null,[{key:"mixInto",value:function(n){if(n&&n.prototype)return n.prototype.toString=function(){return M(this)},n.prototype.inspect=function(){return this.toString()},n;throw"Cannot derive Show from "+A(n)}}]),n}(),E={Show:w,Eq:S,Ord:N},_=n("Sum",["value"]).deriving(w,S,N);_.of=function(n){var t=Number(n);return"number"!=typeof t||isNaN(t)?_(0):_(t)},_.empty=function(){return _(0)},_.fn.concat=function(n){if(_.is(n))return _(this.value+n.value);throw"Sum::concat cannot append "+A(n)+" to "+A(this)};var I=n("Product",["value"]).deriving(w,S,N);I.of=function(n){var t=Number(n);return"number"!=typeof t||isNaN(t)?I(1):I(t)},I.empty=function(){return I(1)},I.fn.concat=function(n){if(I.is(n))return I(this.value*n.value);throw"Product::concat cannot append "+A(n)+" to "+A(this)};var C=n("Min",["value"]).deriving(w,S,N);C.of=function(n){var t=Number(n);return"number"!=typeof t||isNaN(t)?C(1/0):C(t)},C.empty=function(){return C(1/0)},C.fn.concat=function(n){if(C.is(n))return this.lt(n)?this:n;throw"Min::concat cannot append "+A(n)+" to "+A(this)};var U=n("Max",["value"]).deriving(w,S,N);U.of=function(n){var t=Number(n);return"number"!=typeof t||isNaN(t)?U(-1/0):U(t)},U.empty=function(){return U(-1/0)},U.fn.concat=function(n){if(U.is(n))return this.gt(n)?this:n;throw"Max::concat cannot append "+A(n)+" to "+A(this)};var j=n("Char",["value"]).deriving(w,S,N);j.of=function(n){return j("string"==typeof n?n:"")},j.empty=function(){return j("")},j.fn.concat=function(n){if(j.is(n))return j(this.value.concat(n.value));throw"Char::concat cannot append "+A(n)+" to "+A(this)};var x=n("Fn",["value"]).deriving(w,S);x.of=function(n){return x("function"==typeof n?n:function(n){return n})},x.empty=function(){return x(function(n){return n})},x.fn.concat=function(t){var r=this;if(x.is(t))return x(function(n){return t.value(r.value(n))});throw"Fn::concat cannot append "+A(t)+" to "+A(this)};var k=n("Any",["value"]).deriving(w,S,N);k.of=function(n){return k("boolean"==typeof n&&n)},k.empty=function(){return k(!1)},k.fn.concat=function(n){if(k.is(n))return this.value?this:k(!!n.value);throw"Any::concat cannot append "+A(n)+" to "+A(this)};var L=n("All",["value"]).deriving(w,S,N);L.of=function(n){return L("boolean"!=typeof n||n)},L.empty=function(){return L(!0)},L.fn.concat=function(n){if(L.is(n))return this.value?L(!!this.value&&!!n.value):this;throw"All::concat cannot append "+A(n)+" to "+A(this)};var F=n("Record",["value"]).deriving(w,S,N);F.of=function(n){return"Object"===A(n)?F(n):F({})},F.empty=function(){return F({})},F.fn.concat=function(n){if(F.is(n))return F(Object.assign({},this.value,n.value));throw"Record::concat cannot append "+A(n)+" to "+A(this)};var T={Sum:_,Product:I,Min:C,Max:U,Char:j,Fn:x,Any:k,All:L,Record:F},q=n("Id",["value"]).deriving(w,S,N);((q.of=q).from=q).fromEither=function(n){return q(n.value)},q.fromMaybe=function(n){return q(n.value)},q.fromList=function(n){return q(n.head)},q.fromSeries=function(n){return q(n.value[0])},q.fn.concat=function(n){if(q.is(n))return q(this.value.concat(n.value));throw"Id::concat cannot append "+A(n)+" to "+A(this)},q.fn.map=function(n){return q(n(this.value))},q.fn.flat=function(){return this.value},q.fn.flatMap=function(n){return this.map(n).flat()},q.fn.ap=function(n){return n.map(this.value)},q.fn.reduce=function(n,t){return n(t,this.value)},q.fn.traverse=function(n,t){return t.fn&&t.fn.ap?t.of(q.of).ap(n(this.value)):n(this.value).map(q.of)},q.fn.sequence=function(n){return this.traverse(function(n){return n},n)};var P=e("Maybe",{Some:["value"],None:[]}).deriving(w,S,N),B=P.Some,D=P.None;P.fn.value=null,P.of=B,P.empty=D,P.from=function(n){return null==n?D():B(n)},P.fromEither=function(n){return n.isRight()?B(n.value):D()},P.fromId=function(n){return P.from(n.value)},P.fromList=function(n){return P.from(n.head)},P.fromSeries=function(n){return P.from(n.value[0])},P.fn.isSome=function(){return this.caseOf({None:function(){return!1},Some:function(){return!0}})},P.fn.concat=function(t){var n=this;if(P.is(t))return this.caseOf({None:function(){return n},Some:function(n){return t.isSome()?B(n.concat(t.value)):t}});throw"Maybe::concat cannot append "+A(t)+" to "+A(this)},P.fn.map=function(t){var n=this;return this.caseOf({None:function(){return n},Some:function(n){return P.from(t(n))}})},P.fn.flat=function(){var n=this;return this.caseOf({None:function(){return n},Some:function(n){return n}})},P.fn.flatMap=function(n){return this.map(n).flat()},P.fn.ap=function(t){var n=this;return this.caseOf({None:function(){return n},Some:function(n){return t.map(n)}})},P.fn.biMap=function(n,t){return this.caseOf({None:function(){return P.from(n(null))},Some:function(n){return P.from(t(n))}})},P.fn.reduce=function(t,r){return this.caseOf({None:function(){return r},Some:function(n){return t(r,n)}})},P.fn.traverse=function(t,n){var r=this;return this.caseOf({None:function(){return n.of(r)},Some:function(n){return t(n).map(P.from)}})},P.fn.sequence=function(n){return this.traverse(function(n){return n},n)},P.fn.alt=function(n){var t=this;return this.caseOf({None:function(){return n},Some:function(){return t}})};var V=e("Either",{Right:["value"],Left:["value"]}).deriving(w,S,N),z=V.Right,G=V.Left;V.of=z,V.empty=function(){return G(null)},V.from=function(n){return null==n||Error.prototype.isPrototypeOf(n)?G(n||null):z(n)},V.fromMaybe=function(n){return n.isSome()?z(n.value):G(null)},V.fromId=function(n){return V.from(n.value)},V.fromList=function(n){return V.from(n.head)},V.fromSeries=function(n){return V.from(n.value[0])},V.try=function(n){return function(){try{return V.from(n.run?n.run.apply(n,arguments):n.apply(void 0,arguments))}catch(n){return G(n)}}},V.fn.isRight=function(){return this.caseOf({Left:function(){return!1},Right:function(){return!0}})},V.fn.concat=function(t){var n=this;if(V.is(t))return this.caseOf({Left:function(){return n},Right:function(n){return t.isRight()?z(n.concat(t.value)):t}});throw"Either::concat cannot append "+A(t)+" to "+A(this)},V.fn.map=function(t){var n=this;return this.caseOf({Left:function(){return n},Right:function(n){return V.from(t(n))}})},V.fn.flat=function(){var n=this;return this.caseOf({Left:function(){return n},Right:function(n){return n}})},V.fn.flatMap=function(n){return this.map(n).flat()},V.fn.ap=function(t){var n=this;return this.caseOf({Left:function(){return n},Right:function(n){return t.map(n)}})},V.fn.biMap=function(t,r){return this.caseOf({Left:function(n){return V.from(t(n))},Right:function(n){return V.from(r(n))}})},V.fn.reduce=function(t,r){return this.caseOf({Left:function(){return r},Right:function(n){return t(r,n)}})},V.fn.traverse=function(t,n){var r=this;return this.caseOf({Left:function(){return n.of(r)},Right:function(n){return t(n).map(V.from)}})},V.fn.sequence=function(n){return this.traverse(function(n){return n},n)},V.fn.swap=function(){return this.caseOf({Left:z,Right:G})},V.fn.alt=function(n){var t=this;return this.caseOf({Left:function(){return n},Right:function(){return t}})};var J=n("Series",["value"]).deriving(w,S,N),K=function(n){if(n.length<2)return n;for(var t=A(n[0]),r=void 0,e=1;e<n.length;e+=1)if(t!==(r=A(n[e])))throw"Series of type "+t+" cannot contain value of type "+r;return n};J.of=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return J(K(t))},J.empty=function(){return J([])},J.from=function(n){return J(K((t=n,Array.isArray(t)?t:null==t?[]:t.length&&"string"!=typeof t?Array.from(t):null!=t[Symbol.iterator]?[].concat(f(t)):[t])));var t},J.fromArray=function(n){return J(K(n))},J.fromId=function(n){return J.from(n.value)},J.fromMaybe=function(n){return n.isSome()?J.from(n.value):J.empty()},J.fromEither=function(n){return n.isRight()?J.from(n.value):J.empty()},J.fromList=function(n){return J(K(n.toArray()))},J.fn[Symbol.iterator]=function(){return this.value[Symbol.iterator]()},J.fn.toArray=function(){return this.value},J.fn.concat=function(n){if(J.is(n))return J(K(this.value.concat(n.value)));throw"Series::concat cannot append "+A(n)+" to "+A(this)},J.fn.map=function(n){return J(this.value.map(n))},J.fn.flat=function(){return this.value.reduce(function(n,t){return n.concat(t)})},J.fn.flatMap=function(n){return this.map(n).flat()},J.fn.ap=function(n){return this.value.length<1?this:n.map(this.value[0])},J.fn.reduce=function(n,t){return this.value.reduce(n,t)},J.fn.reduceRight=function(n,t){return this.value.reduceRight(n,t)},J.fn.traverse=function(r,n){return this.reduce(function(n,t){return r(t).map(function(t){return function(n){return n.concat(J.of(t))}}).ap(n)},n.of(J.empty()))},J.fn.sequence=function(n){return this.traverse(function(n){return n},n)},J.fn.alt=function(n){return this.value.length<1?n:this},J.fn.foldMap=function(r){return this.value.reduce(function(n,t){return null==n?r(t):n.concat(r(t))},null)},J.fn.fold=function(n){return this.foldMap(n.of)},J.fn.filter=function(n){return J(this.value.filter(n))},J.fn.intercalate=function(r){return J(K(this.value.reduce(function(n,t){return n.length<1?n.concat(t):n.concat([r,t])},[])))},J.fn.cons=function(n){return J(K([n].concat(this.value)))},J.fn.snoc=function(n){return J(K(this.value.concat(n)))},J.fn.take=function(n){return J(this.value.slice(0,n))},J.fn.drop=function(n){return J(this.value.slice(n))},J.fn.find=function(r){var n=this.value.find?this.value.find(r):this.value.reduce(function(n,t){return null==n&&r(t)?t:n},null);return null==n?null:n};var Y=e("List",{Cons:["head","tail"],Nil:[]}),H=Y.Cons,Q=Y.Nil;Y.fn.head=null,Y.fn.tail=Q();var W=Symbol("BREAK"),X=function(n,t,r){for(var e=t,u=r;!Q.is(u);)e=n(e,u.head),u=u.tail;return e};Y.of=function(n){return H(n,Q())},Y.empty=Q,Y.from=function(n){return null==n?Q():Array.isArray(n)?Y.fromArray(n):H(n,Q())},Y.fromArray=function(n){return n.reduceRight(function(n,t){return H(t,n)},Q())},Y.fromId=function(n){return Y.from(n.value)},Y.fromMaybe=function(n){return n.isSome()?Y.from(n.value):Y.empty()},Y.fromEither=function(n){return n.isRight()?Y.from(n.value):Y.empty()},Y.fromSeries=function(n){return Y.fromArray(n.value)},Y.fn[Symbol.iterator]=function(){var n=this;return this.caseOf({Nil:function(){return{done:!0,next:function(){}}},Cons:function(){return n.toArray()[Symbol.iterator]()}})},Y.fn.toString=function(){return this.caseOf({Nil:function(){return"Nil"},Cons:function(n,t){return"Cons("+M(n)+", "+t.toString()+")"}})},Y.fn.toArray=function(){return this.reduceRight(function(n,t){return n.concat(t)},[])},Y.fn.concat=function(n){var t=this;if(Y.is(n))return this.caseOf({Nil:function(){return t},Cons:function(){return Q.is(n)?n:t.reduceRight(function(n,t){return H(t,n)},n)}});throw"List::concat cannot append "+A(n)+" to "+A(this)},Y.fn.map=function(r){return this.reduceRight(function(n,t){return H(r(t),n)},Q())},Y.fn.flat=function(){return this.reduceRight(function(n,t){return t.reduceRight(function(n,t){return H(t,n)},n)},Q())},Y.fn.flatMap=function(n){return this.map(n).flat()},Y.fn.ap=function(t){var n=this;return this.caseOf({Nil:function(){return n},Cons:function(n){return t.map(n)}})},Y.fn.reduce=function(n,t){var r=this;return this.caseOf({Nil:function(){return t},Cons:function(){return X(n,t,r)}})},Y.fn.reduceRight=function(t,r){var e=this;return this.caseOf({Nil:function(){return r},Cons:function(){return n=e,X(t,r,X(function(n,t){return H(t,n)},Q(),n));var n}})},Y.fn.traverse=function(e,n){var t=this;return this.caseOf({Nil:function(){return n.of(t)},Cons:function(){return t.reduceRight(function(n,r){return n.flatMap(function(t){return e(r).map(function(n){return H(n,t)})})},n.of(Q()))}})},Y.fn.sequence=function(n){return this.traverse(function(n){return n},n)},Y.fn.alt=function(n){var t=this;return this.caseOf({Nil:function(){return n},Cons:function(){return t}})},Y.fn.foldMap=function(r){return this.reduceRight(function(n,t){return null==n?r(t):n.concat(r(t))},null)},Y.fn.fold=function(n){return this.foldMap(n.of)},Y.fn.filter=function(r){return this.reduceRight(function(n,t){return r(t)?H(t,n):n},Q())},Y.fn.intercalate=function(r){return this.reduceRight(function(n,t){return Q.is(n)?H(t,n):H(t,H(r,n))},Q())},Y.fn.cons=function(n){return H(n,this)},Y.fn.snoc=function(n){return this.reduceRight(function(n,t){return H(t,n)},H(n,Q()))},Y.fn.take=function(r){var n=this;return this.caseOf({Nil:function(){return n},Cons:function(n,t){return 0<r?H(n,t.take(r-1)):Q()}})},Y.fn.drop=function(r){var n=this;return this.caseOf({Nil:function(){return n},Cons:function(n,t){return 1<r?t.drop(r-1):t}})},Y.fn.find=function(r){var n=this;return this.caseOf({Nil:function(){return null},Cons:function(){return function(n,t,r){for(var e=t,u=r;!Q.is(u);){var o=n(e,u.head),i=c(o,2),f=i[0];if(e=i[1],f===W)break;u=u.tail}return e}(function(n,t){return r(t)?[W,t]:[null,n]},null,n)}})};var Z=n("IO",["run"]);Z.of=function(n){return Z(function(){return n})},Z.empty=function(){return Z(function(n){return n})},Z.from=function(n){return"function"==typeof n?Z(n):Z.of(n)},Z.fromEither=function(n){return Z.of(n.value)},Z.fromMaybe=function(n){return Z.of(n.value)},Z.fromList=function(n){return Z.of(n.head)},Z.fromSeries=function(n){return Z.of(null==n.value[0]?null:n.value[0])},Z.fromId=function(n){return Z.of(n.value)},Z.fn.concat=function(t){var r=this;if(Z.is(t))return Z(function(n){return t.run(r.run(n))});throw"IO::concat cannot append "+A(t)+" to "+A(this)},Z.fn.map=function(t){var r=this;return Z(function(n){return t(r.run(n))})},Z.fn.flat=function(){return this.run()},Z.fn.flatMap=function(n){return this.map(n).flat()},Z.fn.ap=function(n){return n.map(this.run)},Z.fn.contraMap=function(t){var r=this;return Z(function(n){return r.run(t(n))})},Z.fn.proMap=function(t,r){var e=this;return Z(function(n){return r(e.run(t(n)))})};var $=n("State",["compute"]);$.Result=n("State.Result",["value","state"]),$.of=function(t){return $(function(n){return $.Result(t,n)})},$.get=function(){return $(function(n){return $.Result(n,n)})},$.put=function(n){return $(function(){return $.Result(null,n)})},$.modify=function(t){return $.get().flatMap(function(n){return $.put(t(n))})},$.fn.map=function(u){var o=this;return $(function(n){var t=o.compute(n),r=t.value,e=t.state;return $.Result(u(r),e)})},$.fn.flat=function(){var u=this;return $(function(n){var t=u.compute(n),r=t.value,e=t.state;return r.compute(e)})},$.fn.flatMap=function(n){return this.map(n).flat()},$.fn.ap=function(n){return this.flatMap(n.map.bind(n))},$.fn.run=function(n){return this.compute(n).value},$.fn.exec=function(n){return this.compute(n).state};var nn=function(n){return"undefined"!=typeof setImmediate?setImmediate(n):"undefined"!=typeof process?process.nextTick(n):setTimeout(n,0)},tn=function(){},rn=n("Task",["run"]).deriving(w,S);rn.fn.cleanUp=tn,rn.of=function(r){return rn(function(n,t){t(r)})},rn.empty=function(){return rn(tn)},rn.resolve=rn.of,rn.reject=function(t){return rn(function(n){n(t)})},rn.timeout=function(r,e){return rn(function(n,t){setTimeout(function(){return t(e())},r)})},rn.fromPromiseFunction=function(e){return function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return rn(function(n,t){e.apply(void 0,r).then(t).catch(n)})}},rn.fromNodeFunction=function(u){return function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return rn(function(r,e){u.apply(void 0,t.concat([function(n,t){n?r(n):e(t)}]))})}},rn.fromId=function(n){return rn.of(n.value)},rn.fromMaybe=function(r){return rn(function(n,t){r.cata({None:n,Some:t})})},rn.fromEither=function(r){return rn(function(n,t){r.cata({Left:n,Right:t})})},rn.fromList=function(n){return null==n.head?rn.reject(n.head):rn.of(n.head)},rn.fromSeries=function(n){return null==n.value[0]?rn.reject(n.value[0]):rn.of(n.value[0])},rn.fromIO=function(r){return rn(function(t,n){try{n(r.run())}catch(n){t(n)}})},rn.fn.toPromise=function(){var r=this;return new Promise(function(n,t){r.run(t,n)})},rn.fn.concat=function(o){var i=this;if(rn.is(o)){var f=function(n,t){i.cleanUp(n),o.cleanUp(t)},n=rn(function(n,t){var r=!1,e=[],u=function(t){return function(n){r||(r=!0,nn(function(){return f(e[0],e[1])}),t(n))}};return e[0]=i.run(u(n),u(t)),e[1]=o.run(u(n),u(t)),e});return n.cleanUp=f,n}throw"Task::concat cannot append "+A(o)+" to "+A(this)},rn.fn.map=function(r){var e=this,n=rn(function(n,t){e.run(n,function(n){return t(r(n))})});return n.cleanUp=this.cleanUp,n},rn.fn.flat=function(){var r=this,n=rn(function(n,t){r.run().run(n,t)});return n.cleanUp=this.cleanUp,n},rn.fn.flatMap=function(e){var n=this,t=rn(function(t,r){n.run(t,function(n){return e(n).run(t,r)})});return t.cleanUp=this.cleanUp,t},rn.fn.ap=function(l){var s=this,h=function(n,t){s.cleanUp(n),l.cleanUp(t)},n=rn(function(t,r){var e=!1,u=!1,o=!1,i=!1,f=!1,c=[],n=function(n){f||(f=!0,t(n))},a=function(t){return function(n){if(!f)return t(n),u&&i?(nn(function(){return h(c[0],c[1])}),r(e(o))):n}};return c[0]=s.run(n,a(function(n){u=!0,e=n})),c[1]=l.run(n,a(function(n){i=!0,o=n})),c});return n.cleanUp=h,n},rn.fn.swap=function(){var r=this,n=rn(function(n,t){r.run(t,n)});return n.cleanUp=this.cleanUp,n},rn.fn.alt=function(r){var e=this,n=rn(function(n,t){e.run(function(){return r.run(n,t)},t)});return n.cleanUp=this.cleanUp,n};var en=e("Free",{Cont:["value","run"],Return:["value"]}),un=en.Cont,on=en.Return;en.of=on,en.liftM=function(n){return un(n,on)},en.from=function(n){return i(n.length,function(){return en.liftM(n.apply(void 0,arguments))})},en.fn.map=function(r){return this.caseOf({Return:function(n){return on(r(n))},Cont:function(n,t){return un(n,function(n){return t(n).map(r)})}})},en.fn.flatMap=function(r){return this.caseOf({Return:function(n){return r(n)},Cont:function(n,t){return un(n,function(n){return t(n).flatMap(r)})}})},en.fn.ap=function(r){return this.caseOf({Return:function(n){return r.map(n)},Cont:function(n,t){return un(n,function(n){return t(n).ap(r)})}})},en.fn.interpret=function(r,e){return this.caseOf({Return:function(n){return e.of(n)},Cont:function(n,t){return null==n?t().interpret(r,e):r(n).flatMap(function(n){return t(n).interpret(r,e)})}})};var fn={Id:q,Maybe:P,Either:V,Series:J,List:Y,IO:Z,State:$,Task:rn,Free:en},cn=d(function(n,t,r,e,u){return O(function(n){return t(r,n,u)},e(n(r,u)))}),an=cn(function(n,t){var r=t[n];return null==r?null:r},function(n,t,r){var e=Array.isArray(r)?[].concat(f(r)):Object.assign({},r);return e[n]=t,e}),ln=function t(r){return{value:r,map:function(n){return t(n(r))}}},sn=d(function(t,n){return ln(O(function(n){return t(n).value},n))}),hn=function(n){return{value:n,map:function(){return this}}},pn=d(function(n,t){return n(hn)(t).value}),vn=d(function(n,t,r){return n(function(n){return ln(t(n))})(r).value}),yn=d(function(n,t,r){return n(function(){return ln(t)})(r).value}),mn=m,dn=g,gn=R,An=E,bn=T,Sn=fn,On={createLens:cn,lenses:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.reduce(function(n,t){return n[t]=an(t),n},{index:an})},mapped:sn,view:pn,over:vn,set:yn},Rn={again:function(n){for(var t=arguments.length,r=Array(1<t?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return u=n,o=r,{isRecur:!0,run:function(){return u.apply(void 0,f(o))}};var u,o},recur:function(t){return i(t.length,function(){for(var n=t.apply(void 0,arguments);n&&n.isRecur;)n=n.run();return n})}};return Object.freeze({adt:mn,lambda:dn,operation:gn,generics:An,monoid:bn,data:Sn,optic:On,trampoline:Rn})});
